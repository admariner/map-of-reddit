{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/SmallPreview.vue?ffd4","webpack:///./src/components/Typeahead.vue?b7d0","webpack:///./src/App.vue?d019","webpack:///./src/lib/bus.js","webpack:///./src/lib/utils.js","webpack:///./src/lib/createSVGLoader.js","webpack:///./src/lib/PointCollection.js","webpack:///./src/lib/PolyLineCollection.js","webpack:///./src/lib/MSDFTextCollection.js","webpack:///./src/lib/ColoredTextCollection.js","webpack:///./src/lib/createFuzzySearcher.js","webpack:///./src/appState.js","webpack:///./src/lib/constants.js","webpack:///./src/lib/LineCollection.js","webpack:///./src/lib/createPointerEventsHandler.js","webpack:///./src/lib/createSubgraphVisualizer.js","webpack:///./src/lib/createSceneLayerManager.js","webpack:///./src/lib/createStreamingSVGRenderer.js","webpack:///./src/Tooltip.vue?da94","webpack:///./src/lib/clickOutside.js","webpack:///src/Tooltip.vue","webpack:///./src/Tooltip.vue?d781","webpack:///./src/Tooltip.vue","webpack:///./src/components/Typeahead.vue?352e","webpack:///src/components/Typeahead.vue","webpack:///./src/components/Typeahead.vue?673d","webpack:///./src/components/Typeahead.vue","webpack:///./src/components/Sidebar.vue?f6ec","webpack:///src/components/Sidebar.vue","webpack:///./src/components/Sidebar.vue?6485","webpack:///./src/components/Sidebar.vue","webpack:///./src/components/ImproveWindow.vue?6d9a","webpack:///src/components/ImproveWindow.vue","webpack:///./src/components/ImproveWindow.vue?4cda","webpack:///./src/components/ImproveWindow.vue","webpack:///./src/SmallPreview.vue?c09b","webpack:///./src/LoadingIcon.vue?c7fe","webpack:///./src/LoadingIcon.vue","webpack:///src/SmallPreview.vue","webpack:///./src/SmallPreview.vue?9cf5","webpack:///./src/SmallPreview.vue","webpack:///./src/lib/createFirstInteractionListener.js","webpack:///src/App.vue","webpack:///./src/App.vue?c53a","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?995e"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","isWebGLEnabled","_e","_m","staticClass","_v","_s","progressMessage","on","$event","preventDefault","onSubgraphRootClick","subgraphName","onExitSubgraph","subreddit","onDeclineAge","slot","showRelated","graphLoaded","onSubmit","appState","query","sidebarVisible","findSubreddit","closeSubredditOnSmallScreen","closeSubredditViewer","onTypeAheadInput","onImproveClick","smallPreview","improveVisible","style","left","tooltip","x","top","y","onBackdropClick","staticRenderFns","bus","eventify","setProgress","msg","fire","debounce","cb","ms","self","handle","lastCall","Date","time","elapsed","clearTimeout","arguments","setTimeout","formatNumber","toString","replace","createSVGLoader","url","disposed","graph","createGraph","parseSVGAsync","createStreamingSVGParser","notifyTagOpen","notifyTagClose","api","load","dispose","getGraph","start","performance","now","getLinksCount","message","getLinkCount","getPathTo","indexOf","baseUrl","URL","pathname","substr","lastIndexOf","fetch","then","response","fetchReader","body","getReader","decoder","TextDecoder","read","processData","progress","chunk","undefined","decode","stream","done","console","log","text","txt","labels","split","forEach","label","addNode","fromId","prevBuffer","weight","Error","mapLoaded","tmp","Uint8Array","byteLength","set","lastAvailableByte","Math","floor","view","DataView","buffer","linkId","getInt32","toId","addLink","element","PointCollection","gl","program","defineProgram","vertex","fragment","attributes","color","ColorAttribute","instanced","point","InstancedAttribute","preDrawHook","postDrawHook","opacity","drawContext","uniforms","modelViewProjection","cameraDistance","position","draw","setCount","GLCollection","PolyLineCollection","options","debug","polygon","flat","triangles","earcut","index","add","MSDFTextCollection","getExtension","getTextProgram","img","msdfImage","Image","crossOrigin","isReady","queue","fontSize","fontInfo","fontPath","json","alphabet","Map","chars","char","charValue","String","fromCharCode","id","onload","_sdfTextureChanged","setTextureCanvas","sdfTextureWidth","width","sdfTextureHeight","height","q","addText","src","bias","textInfo","z","dx","limit","w","sdfPos","xadvance","info","size","scale","cx","cy","yoffset","charSize","texturePosition","error","scene","renderFrame","capacity","ColoredTextCollection","fuzzysort","require","createFuzzySearcher","words","addWord","find","word","promise","goAsync","results","map","html","highlight","target","pendingSave","qs","state","instance","useSearch","userTypedSomething","getFilePath","saveQuery","newQuery","unset","getQueryState","getCameraPosition","coordinates","v","Number","parseFloat","isFinite","filter","saveScenePosition","dc","getDrawContext","Colors","PRIMARY_HIGHLIGHT_COLOR","SECONDARY_HIGHLIGHT_COLOR","TERNARY_COLOR","TERNARY_LINK","LayerLevels","Polygons","Edges","HighlightedEdges","Nodes","Labels","Text","NamedGroups","MainGraph","LineCollection","createPointerEventsHandler","sceneLayerManager","spatialIdex","RBush","moved","isPaused","getScene","handleClick","handleMove","handleTransform","highlightedNodes","getGL","firstLevelArrows","secondLevelArrows","addToLayer","elementsGroupName","addToNamedGroup","clearHighlights","focusUI","setPaused","cameraZPosition","min","max","onTransform","clear","ui","getHighlightedLinks","linkUI","links","isFirstLevel","getHighlightedNodes","nodeUI","insert","minX","minY","maxX","maxY","removeChild","off","e","findNearest","newIsPaused","originalEvent","clientX","clientY","neighborIds","knn","neighbor","uiX","uiY","dist","hypot","createLayout","Easing","easeInQuart","createSubgraphVisualizer","subgraph","viewBox","nodeNameToUI","layout","raf","MAX_FRAMES","renderCount","ourNodeNameToUI","points","TextCollection","transitionAnimator","createTransitionAnimator","pointerEvents","focusSubgraphNode","run","hlNode","nodeUIs","forEachLinkedNode","other","linkUIs","forEachLink","link","from","to","onSceneIsBack","cancelAnimationFrame","parent","startSceneRestoration","startFadeOut","beginLayout","timeStep","springLength","springCoefficient","gravity","nodeMass","nodeId","sqrt","rememberAndSetOriginalPositions","requestAnimationFrame","frame","step","updateNodePositions","finishRendering","setViewBox","getBoundingRect","getRootNodeId","root","forEachNode","node","isRoot","getNodePosition","rootNode","subgraphDone","boundingRect","Infinity","right","bottom","pos","update","copyPosition","ourUI","setNodePosition","durationInFrames","zoomOutViewBox","currentStep","zoomStart","zoomEnd","changeRectangleFinishedCallback","doneCallback","positions","startZoomOut","startZoomIn","getCurrentBoundingRectangle","changeRectangle","side","tan","fov","pixelRatio","getNamedGroup","elements","el","hideNamedGroup","current","nodeCollections","immediate","restoreNamedGroup","fadeIn","lerp","createSceneLayerManager","namedGroups","groupName","group","isHidden","layer","layerIndex","rootElement","getRoot","lastElementWithLowerLayerIndex","children","warn","insertChildAfter","appendChild","createStreamingSVGRenderer","canvas","ignoreSVGViewBox","initScene","fuzzySearcher","loader","subgraphVisualizer","persistedName","nodes","boundariesFill","labelsText","currentTransform","createTransformParser","nodesByComponent","complimentaryColor","clusterColors","setProgressDebounced","focusNode","unfocus","exitSubgraphMode","loadSVG","focus","neighbors","componentId","has","idx","maxLinks","secondaryLinkColor","neighborId","subgraphNodes","Set","addNeighbors","neighborsSet","otherNode","runSubGraphVisualizer","Array","addedNode","getNode","isFirstChild","hasLink","isRootLevel","nodeName","path","handleElementStart","handleElementEnd","tagName","viewBoxArr","finiteNumber","addBorder","transform","pushTransform","popTransform","innerText","appendTextLabel","getNumericAttribute","alpha","hexColor","getElementFillColor","transformY","getTextAttribute","getLoadedSubreddits","parseBorder","addPolygon","clusterId","getComplimentaryColor","lightningFactor","g","b","rgbToHsl","h","hslToRgb","r0","g0","b0","hue2rgb","round","createScene","allowPinchRotation","maxZoom","minZoom","setClearColor","cameraPosition","getCamera","initialSceneSize","getPointsFromPathData","x0","y0","isDirty","tx","ty","transformStack","transformStr","parseTransform","pop","str","transformNumbers","match","coefficients","updateTransform","record","rgbArray","startClick","props","methods","component","directives","rawName","expression","menuClicked","ref","placeholder","domProps","currentQuery","handleInput","cycleTheList","showClearButton","clearSearch","_l","suggestion","class","selected","pickSuggestion","loadingError","nodeList","ctx","seed","createDocumentHandler","binding","vnode","mouseup","mousedown","context","contains","popperElm","methodName","bindingFn","document","addEventListener","documentHandler","unbind","len","default","delay","currentSelected","showSuggestions","showLoading","suggestions","watch","refresh","getSuggestionsInternal","$emit","hideSuggestions","pendingKeyToShow","showIfNeeded","visible","$refs","input","payload","shouldProceed","event","previous","isArray","items","which","onClose","mounted","handleKeyDown","beforeDestroy","removeEventListener","showFullPreview","details","subscribers","active","image","icon","description","script","components","LoadingIcon","loading","getSubredditInfo","fetchedName","createFirstInteractionListener","callback","handleFirstEvent","called","Tooltip","Typeahead","Subreddit","Sidebar","ImproveWindow","SmallPreview","isSmallScreen","typeaheadChanged","showTooltip","showSubreddit","forceFullView","disposeFirstListener","subgraphVisualized","svgRenderer","innerWidth","Vue","config","productionTip","render","App","$mount"],"mappings":"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","file":"js/app.1b7c829b.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SmallPreview.vue?vue&type=style&index=0&lang=stylus&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Typeahead.vue?vue&type=style&index=0&lang=stylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[(!_vm.isWebGLEnabled)?_c('div',[_vm._m(0)]):_vm._e(),(_vm.isWebGLEnabled)?_c('div',[_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.progressMessage)?_c('div',{staticClass:\"progress\"},[_vm._v(_vm._s(_vm.progressMessage))]):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.subgraphName)?_c('div',{staticClass:\"progress subgraph\"},[_vm._v(\" Only \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onSubgraphRootClick($event)}}},[_vm._v(\"/r/\"+_vm._s(_vm.subgraphName))]),_vm._v(\" related subreddits are shown. \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onExitSubgraph($event)}}},[_vm._v(\"view all\")])]):_vm._e()]),(_vm.subreddit)?_c('subreddit',{staticClass:\"preview\",attrs:{\"name\":_vm.subreddit},on:{\"declineAge\":_vm.onDeclineAge}},[_c('template',{slot:\"after-title\"},[_c('div',[(_vm.graphLoaded)?_c('a',{staticClass:\"subreddit-action\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.showRelated($event)}}},[_vm._v(\"Show related\")]):_vm._e(),(!_vm.graphLoaded)?_c('span',{staticClass:\"subreddit-action\"},[_vm._v(\"the map is still loading...\")]):_vm._e()])])],2):_vm._e(),_c('form',{staticClass:\"search-box\",on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('typeahead',{attrs:{\"placeholder\":\"Find subreddit\",\"showClearButton\":_vm.subreddit,\"query\":_vm.appState.query},on:{\"menuClicked\":function($event){_vm.sidebarVisible = true},\"selected\":_vm.findSubreddit,\"beforeClear\":_vm.closeSubredditOnSmallScreen,\"cleared\":_vm.closeSubredditViewer,\"inputChanged\":_vm.onTypeAheadInput}})],1),_c('a',{staticClass:\"accent improve\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onImproveClick($event)}}},[_vm._v(\"Improve this map\")]),_c('transition',{attrs:{\"name\":\"slide-bottom\"}},[(_vm.smallPreview)?_c('small-preview',{staticClass:\"small-preview\",attrs:{\"name\":_vm.smallPreview}}):_vm._e()],1),_c('transition',{attrs:{\"name\":\"slide-top\"}},[(_vm.improveVisible)?_c('improve-window',{staticClass:\"improve-window\",on:{\"close\":function($event){_vm.improveVisible = false}}}):_vm._e()],1),(_vm.tooltip)?_c('tooltip',{staticClass:\"tooltip\",style:({\n    left: _vm.tooltip.x + 'px',\n    top: _vm.tooltip.y + 'px'\n  }),attrs:{\"data\":_vm.tooltip}}):_vm._e(),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.sidebarVisible || _vm.improveVisible)?_c('div',{staticClass:\"backdrop\",on:{\"click\":_vm.onBackdropClick}}):_vm._e()]),_c('transition',{attrs:{\"name\":\"slide-left\"}},[(_vm.sidebarVisible)?_c('sidebar',{on:{\"close\":function($event){_vm.sidebarVisible = false}}}):_vm._e()],1)],1):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"absolute no-webgl\"},[_c('h4',[_vm._v(\"WebGL is not enabled :(\")]),_c('p',[_vm._v(\"This website needs \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://en.wikipedia.org/wiki/WebGL\"}},[_vm._v(\"WebGL\")]),_vm._v(\" to render a map of reddit. \")]),_vm._v(\" \"),_c('p',[_vm._v(\" You can try another browser. If the problem persists - very likely your video card isn't supported. \")])])}]\n\nexport { render, staticRenderFns }","import eventify from 'ngraph.events';\n\nconst bus = eventify({});\n\nexport default bus;\n\nexport function setProgress(msg) {\n    bus.fire('progress', msg());\n}","\nexport function debounce(cb, ms, self) {\n  let lastCall = new Date();\n  let handle;\n\n  return function() {\n    let time = new Date();\n    let elapsed = time - lastCall;\n    clearTimeout(handle);\n    if (elapsed > ms) {\n      cb.apply(self, arguments)\n    } else {\n      lastCall = time;\n      handle = setTimeout(cb, ms, arguments)\n    }\n  }\n}\n\nexport function formatNumber(x) {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}","import eventify from 'ngraph.events';\nimport createGraph from 'ngraph.graph';\nimport {createStreamingSVGParser} from 'streaming-svg-parser';\nimport {setProgress} from './bus';\nimport {formatNumber} from './utils';\n\nexport default function createSVGLoader(url) {\n  let disposed = false;\n  let graph = createGraph();\n  let parseSVGAsync = createStreamingSVGParser(notifyTagOpen, notifyTagClose, true)\n\n  let api = eventify({load, dispose, getGraph() { return graph; }});\n  return api;\n\n  function dispose() {\n    disposed = true;\n  }\n\n  function load() {\n    let start = window.performance.now();\n    fetch(url, {mode: 'cors'}).then(response => {\n      let fetchReader = response.body.getReader();\n      let decoder = new TextDecoder();\n\n      return fetchReader.read().then(processData);\n\n      function processData(progress) {\n        if (disposed) return;\n\n        let chunk = (progress.value !== undefined && decoder.decode(progress.value, {stream: !progress.done})) || '';\n        return parseSVGAsync(chunk).then(() => {\n          if(progress.done) {\n            return;\n          }\n          return fetchReader.read().then(processData);\n        });\n      }\n    }).then(() => {\n      console.log('Elapsed: ', window.performance.now() - start);\n      setProgress(() => ({\n        message: 'Loading links...'\n      }));\n      // now the svg file is loaded. Let's load secondary information\n      return fetch(getPathTo('node-ids.txt'), {mode: 'cors'}).then(response => response.text()).then(txt => {\n        let labels = txt.split('\\n');\n        labels.forEach(label => graph.addNode(label));\n        return labels;\n      });\n    }).then((labels) => {\n      // now load the edges:\n      let fromId, fetchReader, prevBuffer, weight;\n      return fetch(getPathTo('links.bin'), {mode: 'cors'})\n      .then(response => {\n        fetchReader = response.body.getReader();\n        return fetchReader.read().then(processData);\n      });\n\n      function processData(progress) {\n        if (disposed) return;\n\n        let chunk = progress.value;\n        if (!chunk && prevBuffer) {\n          throw new Error('Incomplete response');\n        }\n        if (!chunk) {\n          setProgress(() => ({\n            mapLoaded: true,\n          }));\n          return graph;\n        }\n\n        if (prevBuffer) {\n          let tmp = new Uint8Array(prevBuffer.byteLength + chunk.byteLength);\n          tmp.set(new Uint8Array(prevBuffer), 0);\n          tmp.set(new Uint8Array(chunk), prevBuffer.byteLength);\n          chunk = tmp;\n          prevBuffer = null;\n        }\n        let lastAvailableByte = Math.floor(chunk.byteLength / 4) * 4;\n        if (chunk.byteLength % 4 !== 0) {\n          prevBuffer = chunk.slice(lastAvailableByte);\n        }\n        const view = new DataView(chunk.buffer);\n        for (let i = 0; i < lastAvailableByte; i += 4) {\n          let linkId = view.getInt32(i, /* little endian = */ true);\n          if (linkId < 0) {\n            fromId = -linkId - 1;\n            weight = 1;\n            graph.addNode(labels[fromId]);\n          } else {\n            let toId = linkId - 1;\n            graph.addLink(labels[fromId], labels[toId], weight)\n            weight += 1;\n          }\n        }\n\n        if (progress.done) {\n          setProgress(() => ({\n            mapLoaded: true\n          }));\n          return graph;\n        }\n        setProgress(getLinksCount);\n        return fetchReader.read().then(processData);\n      }\n    });\n\n    function getLinksCount() {\n      return {\n        message: 'Loaded ' + formatNumber(graph.getLinkCount()) + ' relationship records'\n      }\n    }\n\n    function getPathTo(name) {\n      if (url.indexOf('http') < 0) return name;\n      let baseUrl = new URL(url);\n      baseUrl.pathname = baseUrl.pathname.substr(0, baseUrl.pathname.lastIndexOf('/') + 1) + name;\n      return baseUrl.toString();\n    }\n\n    return api;\n  }\n\n  function notifyTagOpen(element) {\n    api.fire('element-start', element);\n  }\n\n  function notifyTagClose(element) {\n    api.fire('element-end', element)\n  }\n\n}","\nimport {GLCollection, defineProgram, ColorAttribute, InstancedAttribute} from 'w-gl';\n\nexport default class PointCollection extends GLCollection {\n  constructor(gl) {\n    let program = defineProgram({\n      gl,\n      vertex: `\n  uniform mat4 modelViewProjection;\n  uniform float opacity;\n  uniform float cameraDistance;\n\n  attribute float size;\n  attribute vec3 position;\n  attribute vec4 color;\n\n  attribute vec2 point; // instanced\n\n  varying vec4 vColor;\n  varying vec2 vPoint;\n  void main() {\n    gl_Position = modelViewProjection * vec4(position + vec3(point * size, 0.), 1.0);\n    vColor = color.abgr;\n    vColor[3] *= opacity *  (1. - smoothstep(0.0, 1., cameraDistance / (3000. * size)));\n    vPoint = point;\n  }`,\n\n      fragment: `\n  precision highp float;\n  varying vec4 vColor;\n  varying vec2 vPoint;\n  void main() {\n    float dist = length(vPoint);\n    if (dist >= 0.5) {discard;}\n    gl_FragColor = vColor;\n  }`,\n      // These are just overrides:\n      attributes: {\n        color: new ColorAttribute(),\n      },\n      instanced: {\n        point: new InstancedAttribute([\n          -0.5, -0.5, -0.5,  0.5, 0.5,  0.5,\n          0.5,  0.5, 0.5, -0.5, -0.5, -0.5,\n        ])\n      },\n\n      preDrawHook(/* programInfo */) {\n        return `gl.enable(gl.DEPTH_TEST);\n        gl.depthFunc(gl.LEQUAL);`;\n      },\n      postDrawHook() {\n        return 'gl.disable(gl.DEPTH_TEST);';\n      },\n    });\n\n    super(program);\n    this.opacity = 1;\n  }\n  draw(gl, drawContext) {\n    if (!this.uniforms) {\n      this.uniforms = {\n        modelViewProjection: this.modelViewProjection,\n        opacity: this.opacity\n      };\n    }\n    this.uniforms.opacity = this.opacity;\n    this.uniforms.cameraDistance = drawContext.view.position[2];\n    this.program.draw(this.uniforms);\n  }\n\n  clear() {\n    this.program.setCount(0);\n  }\n}","import earcut from 'earcut';\nimport {defineProgram, ColorAttribute, GLCollection} from 'w-gl';\n\nexport default class PolyLineCollection extends GLCollection {\n  constructor(gl, options = {}) {\n    let program = defineProgram({\n      gl,\n      debug: options.debug,\n      vertex: `\n  uniform mat4 modelViewProjection;\n  uniform float opacity;\n\n  attribute vec2 point;\n  attribute vec4 color;\n  varying vec4 vColor;\n\n  void main() {\n    gl_Position = modelViewProjection * vec4(point, -1.0, 1.0);\n    vColor = color.abgr;\n    vColor[3] *= opacity;\n  }`,\n\n      fragment: `\n  precision highp float;\n\n  varying vec4 vColor;\n\n  void main() {\n    gl_FragColor = vColor;\n  }`,\n      attributes: {\n        color: new ColorAttribute(),\n      },\n    });\n    super(program);\n    this.opacity = options.opacity === undefined ? 1 : options.opacity;\n    this.color = options.color || 0x000000ff;\n  }\n\n  draw() {\n    if (!this.uniforms) {\n      this.uniforms = {\n        modelViewProjection: this.modelViewProjection,\n        opacity: this.opacity\n      };\n    }\n    this.uniforms.opacity = this.opacity;\n    this.program.draw(this.uniforms);\n  }\n\n  clear() {\n    this.program.setCount(0);\n  }\n\n  addPolygon({ polygon, color }) {\n    polygon = polygon.flat();\n    let triangles = earcut(polygon);\n    for (let i = 0; i < triangles.length; i++) {\n      let index = triangles[i] * 2;\n      this.add({\n        point: [polygon[index], polygon[index + 1]],\n        color: color || this.color,\n      });\n    }\n\n    for (let i = 0; i < 3; ++i) {\n      this.add({\n        point: [0, 0],\n        color: 0x0,\n      });\n    }\n  }\n}\n","import { defineProgram, InstancedAttribute, GLCollection } from 'w-gl';\n\nexport default class MSDFTextCollection extends GLCollection {\n  constructor(gl, options = {}) {\n    gl.getExtension('OES_standard_derivatives');\n\n    super(getTextProgram(gl, options));\n\n    let img = (this.msdfImage = new Image());\n    img.crossOrigin = 'Anonymous';\n    this.isReady = false;\n    this.queue = [];\n    this.fontSize = options.fontSize || 2;\n    this.opacity = options.opacity !== undefined ? options.opacity : 1;\n    this.fontInfo = null;\n\n    let fontPath = 'fonts';\n    fetch(`${fontPath}/Roboto.json`, { mode: 'cors' })\n      .then((x) => x.json())\n      .then((fontInfo) => {\n        this.fontInfo = fontInfo;\n        this.alphabet = new Map();\n        fontInfo.chars.forEach((char) => {\n          let charValue = String.fromCharCode(char.id);\n          this.alphabet.set(charValue, char);\n        });\n\n        this.msdfImage.onload = () => {\n          this._sdfTextureChanged = true;\n          this.program.setTextureCanvas('msdf', this.msdfImage);\n          this.isReady = true;\n          this.sdfTextureWidth = img.width;\n          this.sdfTextureHeight = img.height;\n\n          this.queue.forEach((q) => this.addText(q));\n          this.queue = [];\n        };\n        this.msdfImage.src = `${fontPath}/Roboto0.png`;\n      });\n  }\n\n  clear() {\n    this.program.setCount(0);\n  }\n\n  draw(gl, drawContext) {\n    if (!this.uniforms) {\n      this.uniforms = {\n        modelViewProjection: this.modelViewProjection,\n        color: [0.9, 0.9, 0.9, 1.0],\n        bias: 0.5,\n        opacity: this.opacity\n      };\n    }\n\n    this.uniforms.cameraDistance = drawContext.view.position[2];\n    this.uniforms.opacity = this.opacity;\n\n    // This draws text outline\n    this.uniforms.color[0] = 0.2;\n    this.uniforms.color[1] = 0.4;\n    this.uniforms.color[2] = 0.8;\n    this.uniforms.color[3] = 0.8;\n    this.uniforms.bias = 0.35;\n    this.program.draw(this.uniforms);\n\n    // This draws text itself\n    this.uniforms.color[0] = 0.9;\n    this.uniforms.color[1] = 0.9;\n    this.uniforms.color[2] = 0.9;\n    this.uniforms.color[3] = 1;\n    this.uniforms.bias = 0.5;\n    this.program.draw(this.uniforms);\n  }\n\n  addText(textInfo) {\n    if (!this.isReady) {\n      this.queue.push(textInfo);\n      return;\n    }\n    let { text, x = 0, y = 0, z = 0 } = textInfo;\n    if (text === undefined) {\n      throw new Error('Text is not defined in ' + textInfo);\n    }\n    let dx = 0;\n    let fontSize = textInfo.fontSize || this.fontSize;\n    if (textInfo.limit !== undefined) {\n      let w = 0;\n      for (let char of text) {\n        let sdfPos = this.alphabet.get(char);\n        if (!sdfPos) continue;\n        w += sdfPos.xadvance;\n      }\n      fontSize = (textInfo.limit * this.fontInfo.info.size) / w;\n    }\n\n    let scale = fontSize / this.fontInfo.info.size;\n    if (textInfo.cx !== undefined) {\n      let w = 0;\n      for (let char of text) {\n        let sdfPos = this.alphabet.get(char);\n        if (!sdfPos) continue;\n\n        w += sdfPos.xadvance;\n      }\n      dx -= w * textInfo.cx * scale;\n    }\n    if (textInfo.cy !== undefined) {\n      y += fontSize * textInfo.cy;\n    }\n\n    for (let char of text) {\n      let sdfPos = this.alphabet.get(char);\n      if (!sdfPos) {\n        console.error(char + ' is missing in the font');\n        continue;\n      }\n\n      this.add({\n        position: [x + dx, y - sdfPos.yoffset * scale, z],\n        charSize: [\n          (fontSize * sdfPos.width) / 42,\n          (-fontSize * sdfPos.height) / 42,\n          fontSize,\n        ],\n        texturePosition: [\n          sdfPos.x / this.sdfTextureWidth,\n          1 - sdfPos.y / this.sdfTextureHeight,\n          sdfPos.width / this.sdfTextureWidth,\n          -sdfPos.height / this.sdfTextureHeight,\n        ],\n      });\n      dx += sdfPos.xadvance * scale;\n    }\n    if (this.scene) this.scene.renderFrame();\n  }\n}\n\nfunction getTextProgram(gl, options) {\n  return defineProgram({\n    capacity: options.capacity || 1,\n    buffer: options.buffer,\n    debug: options.debug,\n    gl,\n    vertex: `\n  uniform mat4 modelViewProjection;\n  uniform vec4 color;\n  uniform float cameraDistance;\n\n  // Position of the text character:\n  attribute vec3 position;\n  // Instanced quad coordinate:\n  attribute vec2 point;\n  attribute vec3 charSize;\n  // [x, y, w, h] - of the character in the msdf texture;\n  attribute vec4 texturePosition;\n\n  varying vec4 vColor;\n  varying vec2 vPoint;\n\n  void main() {\n    gl_Position = modelViewProjection * vec4(position + vec3(vec2(point.x, point.y) * charSize.xy, position.z), 1.);\n    vPoint = texturePosition.xy + point * texturePosition.zw;\n    vColor = color;\n    vColor[3] *= (1. - smoothstep(0.0, 1., cameraDistance / (5000. * charSize.z)));\n  }`,\n\n    fragment: `\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n  precision highp float;\n  varying vec2 vPoint;\n  varying vec4 vColor;\n\n  uniform float bias;\n  uniform float opacity;\n  uniform float cameraDistance;\n  uniform sampler2D msdf;\n\n  float median(float r, float g, float b) {\n    return max(min(r, g), min(max(r, g), b));\n  }\n\n  void main() {\n    vec3 sample = texture2D(msdf, vPoint).rgb;\n    float sigDist = median(sample.r, sample.g, sample.b) - bias;\n    float alpha = clamp(sigDist / fwidth(sigDist) + bias, 0.0, 1.0);\n    gl_FragColor = vec4(vColor.rgb, vColor.a * alpha * opacity);\n  }`,\n    instanced: {\n      point: new InstancedAttribute([0, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 1]),\n    },\n  });\n}\n","import { defineProgram, ColorAttribute, InstancedAttribute, GLCollection } from 'w-gl';\n\nexport default class ColoredTextCollection extends GLCollection {\n  constructor(gl, options = {}) {\n    gl.getExtension('OES_standard_derivatives');\n\n    super(getTextProgram(gl, options));\n\n    // TODO: this duplicates MSDFTextCollection. DRY it.\n    let img = (this.msdfImage = new Image());\n    img.crossOrigin = 'Anonymous';\n    this.isReady = false;\n    this.queue = [];\n    this.fontSize = options.fontSize || 2;\n    this.opacity = options.opacity !== undefined ? options.opacity : 1;\n    this.fontInfo = null;\n\n    let fontPath = 'fonts';\n    fetch(`${fontPath}/Roboto.json`, { mode: 'cors' })\n      .then((x) => x.json())\n      .then((fontInfo) => {\n        this.fontInfo = fontInfo;\n        this.alphabet = new Map();\n        fontInfo.chars.forEach((char) => {\n          let charValue = String.fromCharCode(char.id);\n          this.alphabet.set(charValue, char);\n        });\n\n        this.msdfImage.onload = () => {\n          this._sdfTextureChanged = true;\n          this.program.setTextureCanvas('msdf', this.msdfImage);\n          this.isReady = true;\n          this.sdfTextureWidth = img.width;\n          this.sdfTextureHeight = img.height;\n\n          this.queue.forEach((q) => this.addText(q));\n          this.queue = [];\n        };\n        this.msdfImage.src = `${fontPath}/Roboto0.png`;\n      });\n  }\n\n  clear() {\n    this.program.setCount(0);\n  }\n\n  draw(gl, drawContext) {\n    if (!this.uniforms) {\n      this.uniforms = {\n        modelViewProjection: this.modelViewProjection,\n        bias: 0.5,\n        opacity: this.opacity\n      };\n    }\n    this.uniforms.opacity = this.opacity;\n    this.uniforms.cameraDistance = drawContext.view.position[2];\n\n    this.uniforms.bias = 0.5;\n    this.program.draw(this.uniforms);\n  }\n\n  addText(textInfo) {\n    if (!this.isReady) {\n      this.queue.push(textInfo);\n      return;\n    }\n    let { text, x = 0, y = 0, z = 0 } = textInfo;\n    if (text === undefined) {\n      throw new Error('Text is not defined in ' + textInfo);\n    }\n    let dx = 0;\n    let fontSize = textInfo.fontSize || this.fontSize;\n    if (textInfo.limit !== undefined) {\n      let w = 0;\n      for (let char of text) {\n        let sdfPos = this.alphabet.get(char);\n        if (!sdfPos) continue;\n        w += sdfPos.xadvance;\n      }\n      fontSize = (textInfo.limit * this.fontInfo.info.size) / w;\n    }\n\n    let scale = fontSize / this.fontInfo.info.size;\n    if (textInfo.cx !== undefined) {\n      let w = 0;\n      for (let char of text) {\n        let sdfPos = this.alphabet.get(char);\n        if (!sdfPos) continue;\n\n        w += sdfPos.xadvance;\n      }\n      dx -= w * textInfo.cx * scale;\n    }\n    if (textInfo.cy !== undefined) {\n      y += fontSize * textInfo.cy;\n    }\n\n    for (let char of text) {\n      let sdfPos = this.alphabet.get(char);\n      if (!sdfPos) {\n        console.error(char + ' is missing in the font');\n        continue;\n      }\n\n      this.add({\n        position: [x + dx, y - sdfPos.yoffset * scale, z],\n        color: textInfo.color,\n        charSize: [\n          (fontSize * sdfPos.width) / 42,\n          (-fontSize * sdfPos.height) / 42,\n          fontSize\n        ],\n        texturePosition: [\n          sdfPos.x / this.sdfTextureWidth,\n          1 - sdfPos.y / this.sdfTextureHeight,\n          sdfPos.width / this.sdfTextureWidth,\n          -sdfPos.height / this.sdfTextureHeight,\n        ],\n      });\n      dx += sdfPos.xadvance * scale;\n    }\n    if (this.scene) this.scene.renderFrame();\n  }\n}\n\nfunction getTextProgram(gl, options) {\n  return defineProgram({\n    capacity: options.capacity || 1,\n    buffer: options.buffer,\n    debug: options.debug,\n    gl,\n    vertex: `\n  uniform mat4 modelViewProjection;\n  uniform float cameraDistance;\n\n  attribute vec4 color;\n\n  // Position of the text character:\n  attribute vec3 position;\n  // Instanced quad coordinate:\n  attribute vec2 point;\n  attribute vec3 charSize;\n  // [x, y, w, h] - of the character in the msdf texture;\n  attribute vec4 texturePosition;\n\n  varying vec2 vPoint;\n  varying vec4 vColor;\n\n  void main() {\n    gl_Position = modelViewProjection * vec4(\n      position + vec3(vec2(point.x, point.y) * charSize.xy, position.z), 1.);\n    vPoint = texturePosition.xy + point * texturePosition.zw;\n    vColor = color.abgr;\n    vColor[3] = smoothstep(0.2, 0.8, cameraDistance / (50. * charSize.z) );\n  }`,\n\n    fragment: `\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n  precision highp float;\n  varying vec2 vPoint;\n  varying vec4 vColor;\n\n  uniform float bias;\n  uniform float opacity;\n  uniform sampler2D msdf;\n\n  float median(float r, float g, float b) {\n    return max(min(r, g), min(max(r, g), b));\n  }\n\n  void main() {\n    vec3 sample = texture2D(msdf, vPoint).rgb;\n    float sigDist = median(sample.r, sample.g, sample.b) - bias;\n    float alpha = clamp(sigDist / fwidth(sigDist) + bias, 0.0, 1.0);\n    gl_FragColor = vec4(vColor.rgb, vColor.a * alpha * opacity);\n  }`,\n    attributes: {\n      color: new ColorAttribute(),\n    },\n    instanced: {\n      point: new InstancedAttribute([0, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 1]),\n    },\n  });\n}\n","const fuzzysort = require('fuzzysort')\n\nexport default function createFuzzySearcher() {\n  let words = [];\n  let api = {\n    addWord,\n    find\n  }\n\n  return api;\n\n  function addWord(word) {\n    words.push(word);\n  }\n\n  function find(query) {\n    let promise = fuzzysort.goAsync(query, words, {limit: 10})\n\n    return promise.then(results => {\n      return results.map(x => ({\n        html: fuzzysort.highlight(x, '<b>', '</b>'),\n        text: x.target\n      }));\n    }); \n    // if(invalidated) promise.cancel()\n  }\n}","let qs = require('query-state')\nlet state = qs.instance({}, {useSearch: true})\nlet pendingSave;\n\nexport default {\n  query: state.get('q') || '',\n  userTypedSomething: false,\n\n  getFilePath() {\n    return state.get('graph') || 'https://anvaka.github.io/map-of-reddit-data/graph.svg';\n  },\n  saveQuery(newQuery) {\n    if (newQuery) {\n      state.set({q: newQuery});\n    } else {\n      state.unset('q');\n    }\n  },\n  getQueryState() {\n    return state;\n  },\n  getCameraPosition() {\n    let coordinates = ['x', 'y', 'z'].map(name => {\n      let v = Number.parseFloat(state.get(name));\n      if (Number.isFinite(v)) return v;\n    }).filter(x => x !== undefined);\n    if (coordinates.length === 3) return coordinates;\n  },\n  saveScenePosition(scene) {\n    if (pendingSave) {\n      clearTimeout(pendingSave);\n      pendingSave = 0;\n    }\n\n    pendingSave = setTimeout(() => {\n      pendingSave = 0;\n      let dc = scene.getDrawContext();\n      let [x, y, z] = dc.view.position;\n      let position = {x, y, z}\n      state.set(position);\n    }, 300);\n  }\n}","export const Colors = {\n  PRIMARY_HIGHLIGHT_COLOR: 0xBF2172ff,\n  SECONDARY_HIGHLIGHT_COLOR: 0xE56BAAff,\n  TERNARY_COLOR: 0xdcdcdcff,\n  TERNARY_LINK: 0x88888844\n};\n\nexport const LayerLevels = {\n  Polygons: 0,\n  Edges: 5,\n  HighlightedEdges: 7,\n  Nodes: 10,\n  Labels: 12,\n  Text: 15\n}\n\nexport const NamedGroups = {\n  MainGraph: 'main-graph-view'\n}","import {GLCollection, defineProgram, InstancedAttribute, ColorAttribute} from 'w-gl';\n\n// Note: the shader has a bug with z coordinate of the arrow. I'm still keeping it and maybe will get back\n// to it later\nexport default class LineCollection extends GLCollection {\n    constructor(gl, options) {\n      let program = defineProgram({\n        gl,\n        vertex: `\nuniform mat4 modelViewProjection;\nuniform float width;\n\nattribute vec3 from, to;\nattribute vec2 point;\nattribute vec4 color;\nvarying vec2 vPoint;\nvarying vec4 vColor;\n\nvoid main() {\n  vec2 xBasis = normalize(to - from).xy;\n  vec2 yBasis = vec2(-xBasis.y, xBasis.x);\n  vec4 clip0 = modelViewProjection * vec4(from.xy + width * yBasis * point.x, from.z, 1.0);\n  vec4 clip1 = modelViewProjection * vec4(to.xy + width * yBasis * point.x, to.z, 1.0);\n  gl_Position = mix(clip0, clip1, point.y);\n  vColor = color;\n}`,\n\n        fragment: `\n    precision highp float;\n    varying vec4 vColor;\n\n    void main() {\n      gl_FragColor = vColor.abgr;\n    }`,\n      attributes: {\n        color: new ColorAttribute(),\n      },\n      instanced: {\n          point: new InstancedAttribute([\n            -0.5, 0, -0.5, 1, 0.5, 1, // First 2D triangle of the quad\n            -0.5, 0, 0.5, 1, 0.5, 0   // Second 2D triangle of the quad\n          ])\n        }\n      });\n      super(program);\n      this.width = (options && options.width) || 1;\n    }\n\n    draw() {\n      if (!this.uniforms) {\n        this.uniforms = {\n          modelViewProjection: this.modelViewProjection,\n          width: this.width,\n        }\n      }\n      this.uniforms.width = this.width;\n      this.program.draw(this.uniforms);\n    }\n    // add(line) {\n    //   if (line.width === undefined) line.width = this.width;\n    //   super.add(line);\n    // }\n\n    clear() {\n      this.program.setCount(0);\n    }\n  }","/**\n * This class is responsible for finding nodes under cursor\n */\nimport RBush from 'rbush';\nimport knn from 'rbush-knn';\nimport bus from './bus';\nimport LineCollection from './LineCollection';\nimport PointCollection from './PointCollection';\nimport {LayerLevels} from './constants';\n\nexport default function createPointerEventsHandler(sceneLayerManager, options) {\n  const spatialIdex = new RBush();\n  let moved = false;\n  let isPaused = false;\n  const scene = sceneLayerManager.getScene();\n\n  scene.on('click', handleClick);\n  scene.on('mousemove', handleMove);\n  scene.on('transform', handleTransform);\n\n  const highlightedNodes = new PointCollection(scene.getGL());\n  const firstLevelArrows = new LineCollection(scene.getGL(), {width: 60});\n  const secondLevelArrows = new LineCollection(scene.getGL(), {width: 20});\n\n  sceneLayerManager.addToLayer(secondLevelArrows, LayerLevels.Edges);\n  sceneLayerManager.addToLayer(firstLevelArrows, LayerLevels.HighlightedEdges);\n  sceneLayerManager.addToLayer(highlightedNodes, LayerLevels.Nodes);\n\n  if (options.elementsGroupName) {\n    sceneLayerManager.addToNamedGroup(firstLevelArrows, options.elementsGroupName);\n    sceneLayerManager.addToNamedGroup(secondLevelArrows, options.elementsGroupName);\n    sceneLayerManager.addToNamedGroup(highlightedNodes, options.elementsGroupName);\n  }\n\n  return {\n    addNode,\n    clearHighlights,\n    focusUI,\n    dispose,\n    setPaused\n  }\n\n  function handleTransform(dc) {\n    // TODO:\n    // if (cameraZPosition < 80) {\n    //   // force camera to not go closer:\n    //   scene.view.position[2] = 80;\n    //   scene.getCamera().setViewBox();\n    // }\n\n    let cameraZPosition = dc.view.position[2];\n    let z = Math.min(cameraZPosition, 8000);\n    firstLevelArrows.width = Math.max(1, 60 * z / 8000);\n    secondLevelArrows.width = Math.max(1, 20 * z / 8000);\n    moved = true;\n    if (options && options.onTransform) options.onTransform();\n  }\n\n  function clearHighlights() {\n    firstLevelArrows.clear();\n    secondLevelArrows.clear();\n    highlightedNodes.clear();\n  }\n\n  function focusUI(ui) {\n    if (ui !== undefined) {\n      bus.fire('show-subreddit', ui.name);\n    }\n    let graph = options && options.getGraph && options.getGraph();\n    if (!ui && !moved && graph) {\n      clearHighlights();\n      bus.fire('show-subreddit', null);\n      scene.renderFrame();\n    }\n\n    moved = false;\n\n    if (ui) {\n      clearHighlights();\n\n      options.getHighlightedLinks(ui).forEach(linkUI => {\n        let links = linkUI.isFirstLevel ? firstLevelArrows : secondLevelArrows;\n        links.add(linkUI);\n      });\n      options.getHighlightedNodes(ui).forEach(nodeUI => highlightedNodes.add(nodeUI));\n\n      scene.renderFrame();\n    } \n  }\n\n  function addNode(ui) {\n    let position = ui.position;\n    let r = ui.size / 2;\n\n    spatialIdex.insert({\n      minX: position[0] - r,\n      minY: position[1] - r,\n      maxX: position[0] + r,\n      maxY: position[1] + r,\n      ui,\n    });\n  }\n\n  function dispose() {\n    scene.removeChild(firstLevelArrows);\n    scene.removeChild(secondLevelArrows);\n    scene.removeChild(highlightedNodes);\n\n    scene.off('click', handleClick);\n    scene.off('mousemove', handleMove);\n    scene.off('transform', handleTransform);\n  }\n\n  function handleClick(e) {\n    let ui = findNearest(e.x, e.y);\n    focusUI(ui);\n  }\n\n  function setPaused(newIsPaused) {\n    isPaused = newIsPaused;\n  }\n\n  function handleMove(e) {\n    if (isPaused) return;\n\n    let ui = findNearest(e.x, e.y);\n    if (ui !== undefined) {\n      bus.fire('show-tooltip', {\n        x: e.originalEvent.clientX,\n        y: e.originalEvent.clientY,\n        data: ui.name,\n      });\n      return;\n    }\n\n    bus.fire('show-tooltip', null);\n  }\n\n  function findNearest(x, y) {\n    const neighborIds = knn(spatialIdex, x, y, 1);\n    let neighbor = neighborIds[0];\n    if (neighbor === undefined) return;\n    let ui = neighbor.ui;\n\n    let [uiX, uiY] = ui.position;\n    let dist = Math.hypot(x - uiX, y - uiY);\n    if (dist < ui.size / 2) return ui;\n  }\n}","import PointCollection from './PointCollection';\nimport TextCollection from './MSDFTextCollection';\nimport {Colors, LayerLevels, NamedGroups} from './constants';\nimport createPointerEventsHandler from './createPointerEventsHandler';\nimport bus, {setProgress} from './bus';\n\nconst createLayout = require('ngraph.forcelayout');\n\nconst Easing = {\n  easeInQuart(x) {\n    return x * x * x * x;\n  }\n}\n\nexport default function createSubgraphVisualizer(subgraph, viewBox, sceneLayerManager, nodeNameToUI) {\n  let layout;\n  let raf;\n  let MAX_FRAMES = 400;\n  let renderCount = 0;\n\n  const ourNodeNameToUI = new Map();\n  const scene = sceneLayerManager.getScene();\n  const points = new PointCollection(scene.getGL());\n  const text = new TextCollection(scene.getGL());\n  const transitionAnimator = createTransitionAnimator(sceneLayerManager, 60 * 0.2, viewBox);\n\n  // order is important. Pointer events should go after main elements\n  sceneLayerManager.addToLayer(points, LayerLevels.Nodes);\n  sceneLayerManager.addToLayer(text, LayerLevels.Text);\n\n  // Now we are going to listen to events from the subgraph:\n  let pointerEvents = createPointerEventsHandler(sceneLayerManager, {\n    getGraph: () => renderCount < MAX_FRAMES && subgraph,\n    getHighlightedLinks,\n    getHighlightedNodes\n  });\n  bus.on('subgraph-focus-node', focusSubgraphNode);\n\n  return {\n    dispose,\n    run\n  };\n\n\n  function focusSubgraphNode(name) {\n    pointerEvents.focusUI(ourNodeNameToUI.get(name));\n  }\n\n  function getHighlightedNodes(ui) {\n    const hlNode = {...ourNodeNameToUI.get(ui.name)};\n    hlNode.color = Colors.PRIMARY_HIGHLIGHT_COLOR ;\n    let nodeUIs = [hlNode];\n    subgraph.forEachLinkedNode(ui.name, (other) => {\n      const hlNode = {...ourNodeNameToUI.get(other.id)};\n      hlNode.color = Colors.SECONDARY_HIGHLIGHT_COLOR;\n      nodeUIs.push(hlNode);\n    });\n\n    return nodeUIs;\n  }\n\n  function getHighlightedLinks(ui) {\n    let linkUIs = [];\n\n    subgraph.forEachLink(link => {\n      let isFirstLevel = (link.fromId === ui.name || link.toId === ui.name);\n      linkUIs.push({\n        from: ourNodeNameToUI.get(link.fromId).position,\n        to: ourNodeNameToUI.get(link.toId).position,\n        color: isFirstLevel ? 0xffffffff : Colors.TERNARY_LINK, \n        isFirstLevel\n      });\n    });\n\n    return linkUIs;\n  }\n\n  function dispose(onSceneIsBack) {\n    cancelAnimationFrame(raf);\n    bus.off('subgraph-focus-node', focusSubgraphNode);\n\n    text.parent.removeChild(text);\n    text.dispose();\n\n    pointerEvents.dispose();\n\n    transitionAnimator.startSceneRestoration(() => {\n      points.parent.removeChild(points);\n      points.dispose();\n      if (onSceneIsBack) onSceneIsBack();\n    }, ourNodeNameToUI, nodeNameToUI, points, onSceneIsBack === undefined);\n    raf = null;\n    scene.renderFrame();\n  }\n\n  function run() {\n    transitionAnimator.startFadeOut();\n    beginLayout();\n    // transitionAnimator.startZoomOut(beginLayout);\n  }\n\n  function beginLayout() {\n    layout = createLayout(subgraph, {\n      timeStep: 80,\n      springLength: 5000,\n      springCoefficient: 1e-5,\n      gravity: -120,\n      nodeMass(nodeId) {\n        let ui = nodeNameToUI.get(nodeId);\n        return ui.size * Math.sqrt(ui.size);\n      }\n    });\n\n    rememberAndSetOriginalPositions();\n    // transitionAnimator.startZoomIn(getBoundingRect(), () => {\n    // });\n    raf = requestAnimationFrame(frame);\n  }\n\n  function frame() {\n    for (let i = 0; i < 10; ++i) layout.step();\n\n    updateNodePositions();\n\n    if (renderCount++ < MAX_FRAMES) {\n      raf = requestAnimationFrame(frame);\n      if (renderCount % 10 === 0) {\n        setProgress(() => ({\n          message: `Layout step ${renderCount} of ${MAX_FRAMES}. Please wait...`\n        }));\n      }\n    } else {\n      finishRendering();\n    }\n\n    scene.setViewBox(getBoundingRect());\n\n    scene.renderFrame();\n  }\n\n  function getRootNodeId() {\n    let root = null;\n    subgraph.forEachNode(node => {\n      if (node.data && node.data.isRoot) {\n        root = node.id;\n        return true;\n      }\n    });\n    if (!root) {\n      throw new Error('Root node is missing in the subgraph');\n    }\n    return root;\n  }\n\n  function finishRendering() {\n    subgraph.forEachNode(node => {\n      let {x, y} = layout.getNodePosition(node.id);\n      let ui = ourNodeNameToUI.get(node.id);\n      pointerEvents.addNode(ui);\n      text.addText({\n        x,\n        y: y - ui.size * 0.75,\n        text: ui.name,\n        limit: 2. * ui.size,\n        cx: 0.5,\n      });\n    });\n\n    let rootNode = getRootNodeId();\n    pointerEvents.focusUI(ourNodeNameToUI.get(rootNode));\n    setProgress(() => ({\n      subgraphDone: true,\n      subgraphName: rootNode\n    }))\n    // transitionAnimator.startZoomIn(boundingRect);\n  }\n\n  function getBoundingRect() {\n    let boundingRect = {\n      left: Infinity,\n      right: -Infinity,\n      top: Infinity,\n      bottom: -Infinity\n    }\n    subgraph.forEachNode(node => {\n      let {x, y} = layout.getNodePosition(node.id);\n      if (x < boundingRect.left) boundingRect.left = x;\n      if (x > boundingRect.right) boundingRect.right = x;\n      if (y < boundingRect.top) boundingRect.top = y;\n      if (y > boundingRect.bottom) boundingRect.bottom = y;\n    });\n    return boundingRect;\n  }\n\n  function updateNodePositions() {\n    subgraph.forEachNode(node => {\n      let pos = layout.getNodePosition(node.id);\n      let ui = ourNodeNameToUI.get(node.id);\n      ui.position[0] = pos.x;\n      ui.position[1] = pos.y;\n      points.update(ui.id, ui);\n    });\n  }\n\n  function rememberAndSetOriginalPositions() {\n    subgraph.forEachNode(node => {\n      let ui = nodeNameToUI.get(node.id);\n      if (!ui) throw new Error('Missing ui for node: ' + node.id);\n      // let isRoot = node.data && node.data.isRoot;\n      let pos = copyPosition(ui.position);\n      let color = Colors.TERNARY_COLOR;\n      // if (isRoot) color = Colors.PRIMARY_HIGHLIGHT_COLOR;\n      // else if (node.data && node.data.isFirstChild) color = Colors.SECONDARY_HIGHLIGHT_COLOR;\n\n      let ourUI = {\n        position: pos,\n        color,\n        size: ui.size,\n        id: ourNodeNameToUI.size,\n        name: ui.name,\n      };\n      ourNodeNameToUI.set(ui.name, ourUI);\n      points.add(ourUI);\n      layout.setNodePosition(node.id, pos[0], pos[1])\n    });\n  }\n\n}\n\nfunction createTransitionAnimator(sceneLayerManager, durationInFrames, zoomOutViewBox) {\n  let elapsed = 0;\n  let raf;\n  let currentStep;\n  let zoomStart, zoomEnd, changeRectangleFinishedCallback;\n  let doneCallback;\n  let positions, nodeUIs;\n  const scene = sceneLayerManager.getScene();\n\n  return {\n    startZoomOut,\n    startZoomIn,\n    startFadeOut,\n    startSceneRestoration,\n    dispose() {\n      cancelAnimationFrame(raf);\n    }\n  }\n\n  function startZoomOut(cb) {\n    elapsed = 0;\n    zoomStart = getCurrentBoundingRectangle();\n    let {width, height, top, left} = zoomOutViewBox;\n    zoomEnd = {\n      top, \n      left,\n      right: left + width,\n      bottom: top + height\n    };\n\n    currentStep = changeRectangle;\n    changeRectangleFinishedCallback = () => {\n      startFadeOut();\n      cb();\n    };\n\n    cancelAnimationFrame(raf);\n    raf = requestAnimationFrame(frame);\n  }\n\n  function startZoomIn(boundingRect, doneCallback) {\n    currentStep = changeRectangle;\n    elapsed = 0;\n    zoomStart = getCurrentBoundingRectangle();\n    zoomEnd = boundingRect;\n    cancelAnimationFrame(raf);\n    raf = requestAnimationFrame(frame);\n    changeRectangleFinishedCallback = null;\n    if (doneCallback) {\n      changeRectangleFinishedCallback = doneCallback;\n    }\n  }\n\n  function getCurrentBoundingRectangle() {\n    let dc = scene.getDrawContext();\n    const {position} = dc.view;\n    let side = position[2] * Math.tan(dc.fov / 2) / dc.pixelRatio;\n    return {\n      left: position[0] - side, \n      right: position[0] + side, \n      top: position[1] - side, \n      bottom: position[1] + side\n    };\n  }\n\n  function startFadeOut() {\n    sceneLayerManager.getNamedGroup(NamedGroups.MainGraph).elements.forEach(el => {\n      el.opacity = 0;\n    });\n    sceneLayerManager.hideNamedGroup(NamedGroups.MainGraph);\n  }\n\n  function startSceneRestoration(done, current, target, nodeCollections, immediate) {\n    if (immediate) {\n      // TODO: this is ugly. Please refactor.\n      sceneLayerManager.restoreNamedGroup(NamedGroups.MainGraph);\n      sceneLayerManager.getNamedGroup(NamedGroups.MainGraph).elements.forEach(el => {\n        el.opacity = 1;\n      });\n      done();\n      return;\n    }\n    elapsed = 0;\n    currentStep = fadeIn;\n    cancelAnimationFrame(raf);\n    raf = requestAnimationFrame(frame);\n    doneCallback = done;\n\n    nodeUIs = nodeCollections;\n    positions = [];\n    current.forEach((ui, name) => {\n      positions.push({\n        ui,\n        from: copyPosition(ui.position),\n        to: target.get(name).position\n      });\n    })\n  }\n\n  function frame() {\n    if (elapsed >= durationInFrames) {\n      elapsed = durationInFrames;\n      currentStep(1);\n      return;\n    } \n\n    raf = requestAnimationFrame(frame);\n    currentStep(elapsed / durationInFrames);\n    elapsed += 1;\n  }\n\n  function changeRectangle(x) {\n    if (x === 1) {\n      if (changeRectangleFinishedCallback) changeRectangleFinishedCallback();\n      changeRectangleFinishedCallback = null;\n      return;\n    }\n\n    scene.setViewBox({\n      top: lerp(zoomStart.top, zoomEnd.top, x),\n      left: lerp(zoomStart.left, zoomEnd.left, x),\n      right: lerp(zoomStart.right, zoomEnd.right, x),\n      bottom: lerp(zoomStart.bottom, zoomEnd.bottom, x)\n    });\n    scene.renderFrame();\n  }\n\n  function lerp(from, to, t) {\n    return to * t + from * (1 - t);\n  }\n\n  function fadeIn(x) {\n    if (x === 0) {\n      // we we just start - let's bring back all nodes from original scene\n      // Their opacity is 0.\n      sceneLayerManager.restoreNamedGroup(NamedGroups.MainGraph);\n    }\n    // we will be changing opacity back to normal:\n    let opacity = Easing.easeInQuart(x);\n    sceneLayerManager.getNamedGroup(NamedGroups.MainGraph).elements.forEach(el => {\n      el.opacity = opacity;\n    });\n    positions.forEach(node => {\n      let ui = node.ui;\n      ui.position[0] = lerp(node.from[0], node.to[0], x);\n      ui.position[1] = lerp(node.from[1], node.to[1], x);\n      nodeUIs.update(ui.id, ui);\n    });\n    sceneLayerManager.getScene().renderFrame();\n\n    if (x === 1 && doneCallback) {\n      // all is done, let's notify the client\n      doneCallback();\n    }\n  }\n}\n\nfunction copyPosition(pos) {\n  return [pos[0], pos[1], pos[2]];\n}","export default function createSceneLayerManager(scene) {\n  // Allows clients to hide/restore multiple elements at once:\n  const namedGroups = new Map(); // string -> {elements: Element[], isHidden: Boolean}\n\n  return {\n    addToLayer,\n    addToNamedGroup,\n    hideNamedGroup,\n    restoreNamedGroup,\n    getNamedGroup: (groupName) => namedGroups.get(groupName),\n    getScene: () => scene\n  };\n\n  function restoreNamedGroup(groupName) {\n    let group = namedGroups.get(groupName);\n    if (group === undefined) throw new Error('No such group: ' + groupName);\n    if (!group.isHidden) return; // already restored\n    group.isHidden = false;\n    group.elements.forEach(element => {\n      // put it back to the previous z-index\n      addToLayer(element, element.layer);\n    });\n  }\n\n  function addToNamedGroup(element, groupName) {\n    let group = namedGroups.get(groupName);\n    if (group === undefined) {\n      group = {\n        elements: [],\n        isHidden: false\n      }\n      namedGroups.set(groupName, group);\n    }\n    // Note: it's your responsibility to avoid duplicates\n    group.elements.push(element);\n  }\n\n  function hideNamedGroup(groupName) {\n    let group = namedGroups.get(groupName);\n    if (!group) {\n      throw new Error('No group with such name: ' + groupName);\n    }\n\n    if (group.isHidden) return; // already hidden;\n    group.isHidden = true;\n    group.elements.forEach(element => {\n      if (element.parent) element.parent.removeChild(element);\n    });\n  }\n\n  function addToLayer(element, layerIndex) {\n    element.layer = layerIndex\n    let rootElement = scene.getRoot();\n    let lastElementWithLowerLayerIndex = null;\n    rootElement.children.forEach(el => {\n      let layer = el.layer;\n      if (layer === undefined) {\n        // z-index may not be correct!\n        console.warn('Scene element without layer index', layer);\n        layer = 0;\n      }\n      if (layer <= layerIndex) {\n        lastElementWithLowerLayerIndex = el;\n      }\n    });\n    if (lastElementWithLowerLayerIndex) {\n      rootElement.insertChildAfter(element, lastElementWithLowerLayerIndex);\n    } else {\n      // none of the existing layers is lower than our own layer index,\n      // send us to the very back:\n      rootElement.appendChild(element, /* sendToBack */ true);\n    }\n  }\n}","import { createScene } from 'w-gl';\nimport createSVGLoader from './createSVGLoader';\nimport {getPointsFromPathData, getElementFillColor} from 'streaming-svg-parser';\nimport PointCollection from './PointCollection';\nimport PolyLineCollection from './PolyLineCollection';\nimport TextCollection from './MSDFTextCollection';\nimport ColoredTextCollection from './ColoredTextCollection';\nimport bus, {setProgress} from './bus';\nimport createFuzzySearcher from './createFuzzySearcher';\nimport {debounce, formatNumber} from './utils'\nimport appState from '../appState';\nimport createGraph from 'ngraph.graph';\nimport createSubgraphVisualizer from './createSubgraphVisualizer';\nimport createPointerEventsHandler from './createPointerEventsHandler';\nimport createSceneLayerManager from './createSceneLayerManager';\nimport {Colors, LayerLevels, NamedGroups} from './constants';\n\nexport default function createStreamingSVGRenderer(canvas) {\n  let ignoreSVGViewBox = false;\n  let scene = initScene();\n  let fuzzySearcher = createFuzzySearcher();\n  window.fuzzySearcher = fuzzySearcher; // TODO: Don't use window.\n\n  let persistedName = appState.query;\n  let nodes = new PointCollection(scene.getGL());\n  let boundariesFill = new PolyLineCollection(scene.getGL(), {color: 0x124182a4, opacity: 1.0});\n\n  let text = new TextCollection(scene.getGL());\n  let labelsText = new ColoredTextCollection(scene.getGL());\n\n  let loader;\n  let viewBox;\n  let currentTransform = createTransformParser();\n  let positions = [];\n\n  const nodeNameToUI = new Map();\n  const nodesByComponent = new Map();\n  const complimentaryColor = new Map();\n  const clusterColors = new Map();\n\n  const setProgressDebounced = debounce(setProgress, 100, window);\n  let subgraphVisualizer;\n  const sceneLayerManager = createSceneLayerManager(scene);\n\n  sceneLayerManager.addToLayer(boundariesFill, LayerLevels.Polygons);\n  sceneLayerManager.addToLayer(nodes, LayerLevels.Nodes);\n  sceneLayerManager.addToLayer(text, LayerLevels.Text);\n  sceneLayerManager.addToLayer(labelsText, LayerLevels.Labels)\n\n  sceneLayerManager.addToNamedGroup(boundariesFill, NamedGroups.MainGraph);\n  sceneLayerManager.addToNamedGroup(nodes, NamedGroups.MainGraph);\n  sceneLayerManager.addToNamedGroup(text, NamedGroups.MainGraph);\n  sceneLayerManager.addToNamedGroup(labelsText, NamedGroups.MainGraph);\n\n  // This is our bread and butter for touch/mouse event handling\n  const pointerEvents = createPointerEventsHandler(sceneLayerManager, {\n    elementsGroupName: NamedGroups.MainGraph,\n    onTransform: () => {\n      // we don't want to update the query string when subgraph is active\n      if (subgraphVisualizer) return;\n\n      appState.saveScenePosition(scene);\n    },\n    getGraph: () => loader && loader.getGraph(),\n    getHighlightedNodes,\n    getHighlightedLinks,\n  });\n\n  bus.on('focus-node', focusNode);\n  bus.on('unfocus', unfocus);\n  bus.on('exit-subgraph', exitSubgraphMode);\n\n  return {\n    loadSVG,\n    focus() {\n      canvas.focus();\n    },\n    dispose,\n    showRelated,\n    getScene() {\n      return scene;\n    },\n  };\n\n  function getHighlightedNodes(ui) {\n    let graph = loader && loader.getGraph();\n    if (!graph) return [];\n\n    const neighbors = nodesByComponent.get(ui.componentId);\n    const hlNode = {...nodeNameToUI.get(ui.name)};\n    hlNode.color = Colors.PRIMARY_HIGHLIGHT_COLOR ;\n    let nodeUIs = [hlNode];\n    graph.forEachLinkedNode(ui.name, (other) => {\n      const hlNode = {...nodeNameToUI.get(other.id)};\n      hlNode.color = Colors.SECONDARY_HIGHLIGHT_COLOR;\n      nodeUIs.push(hlNode);\n      if (!neighbors.has(other.id)) return;\n    });\n\n    return nodeUIs;\n  }\n\n  function getHighlightedLinks(ui) {\n    let graph = loader && loader.getGraph();\n    if (!graph) return [];\n\n    let maxLinks = 10;\n    let neighbors = nodesByComponent.get(ui.componentId);\n    let secondaryLinkColor = complimentaryColor.get(ui.componentId);\n    let idx;\n    let linkUIs = [];\n\n    neighbors.forEach((neighborId) => {\n      idx = 0;\n      graph.forEachLinkedNode(neighborId, (other) => {\n        if (!neighbors.has(other.id)) return;\n        let isFirstLevel = neighborId === ui.name || other.id === ui.name;\n        if (idx > maxLinks && !isFirstLevel) return;\n        linkUIs.push({\n          from: nodeNameToUI.get(neighborId).position,\n          to: nodeNameToUI.get(other.id).position,\n          color: isFirstLevel ? 0xffffffff : secondaryLinkColor, \n          isFirstLevel\n        });\n        idx += 1;\n      });\n    });\n\n    return linkUIs;\n  }\n\n  function showRelated(subreddit) {\n    let subgraph = createGraph();\n    subgraph.addNode(subreddit, {isRoot: true});\n\n    let graph = loader.getGraph();\n    let subgraphNodes = new Set();\n    addNeighbors(subreddit, subgraphNodes);\n\n    Array.from(subgraphNodes).forEach(node => {\n      addNeighbors(node, subgraphNodes);\n    });\n\n    subgraphNodes.forEach(node => {\n      let addedNode = subgraph.getNode(node);\n      if (!addedNode || !addedNode.data) {\n        let isFirstChild = graph.hasLink(node, subreddit) || graph.hasLink(subgraph, node);\n        subgraph.addNode(node, {isFirstChild});\n      }\n\n      graph.forEachLinkedNode(node, (otherNode, link) => {\n        if (!subgraphNodes.has(otherNode.id)) return;\n        if (subgraph.hasLink(link.fromId, link.toId)) return;\n\n        let isRootLevel = (link.fromId === subreddit) || (link.toId === subreddit);\n        subgraph.addLink(link.fromId, link.toId, {isRootLevel});\n      });\n    });\n\n    pointerEvents.setPaused(true); // let the subgraph to handle the events\n    if (subgraphVisualizer) {\n      // we don't want any animation here. Dispose right away!\n      subgraphVisualizer.dispose();\n      subgraphVisualizer = null;\n    } \n    runSubGraphVisualizer();\n\n    function addNeighbors(node, neighborsSet) {\n      graph.forEachLinkedNode(node, otherNode => {\n        neighborsSet.add(otherNode.id);\n      });\n    }\n\n    function runSubGraphVisualizer() {\n      subgraphVisualizer = createSubgraphVisualizer(subgraph, viewBox, sceneLayerManager, nodeNameToUI)\n      subgraphVisualizer.run();\n    }\n  }\n\n  function dispose() {\n    if (loader) loader.dispose();\n    bus.off('focus-node', focusNode);\n    bus.off('unfocus', unfocus);\n    bus.off('exit-subgraph', exitSubgraphMode);\n\n    pointerEvents.dispose();\n    scene.dispose();\n  }\n\n  function focusNode(nodeName) {\n    // this means they entered something in the search box\n    let ui = nodeNameToUI.get(nodeName);\n    if (!ui) return;\n\n    let [cx, cy] = ui.position;\n    let size = (ui.size || 10) * 2;\n    scene.setViewBox({\n      left: cx - size,\n      top: cy - size,\n      right: cx + size,\n      bottom: cy + size,\n    });\n\n    if (subgraphVisualizer) {\n      subgraphVisualizer.dispose(() => {\n        pointerEvents.setPaused(false); // we take care of the events now\n      });\n      subgraphVisualizer = null;\n    }\n\n    pointerEvents.focusUI(ui);\n    scene.renderFrame();\n  }\n\n  function unfocus() {\n    // This means they closed the sidebar\n    pointerEvents.clearHighlights();\n\n    scene.renderFrame();\n  }\n\n  function exitSubgraphMode() {\n    if (subgraphVisualizer) {\n      subgraphVisualizer.dispose(() => {\n        pointerEvents.setPaused(false); // take care of the events now\n      });\n      subgraphVisualizer = null;\n    }\n  }\n\n  function loadSVG(path) {\n    if (loader) loader.dispose();\n\n    loader = createSVGLoader(path)\n      .on('element-start', handleElementStart)\n      .on('element-end', handleElementEnd)\n      .load();\n  }\n\n  function handleElementStart(element) {\n    // TODO: this would be better done with FSM\n    if (element.tagName === 'svg') {\n      let viewBoxArr = (element.attributes.get('viewBox') || '0 0 1024 1024')\n        .split(' ')\n        .map((x) => Number.parseFloat(x))\n        .filter(finiteNumber);\n\n      if (viewBoxArr.length !== 4) throw new Error('Unknown viewBox definition: ' + element.attributes.get('viewBox'));\n\n      viewBox = {\n        left: viewBoxArr[0],\n        top: viewBoxArr[1],\n        width: viewBoxArr[2],\n        height: viewBoxArr[3],\n      };\n\n      if (!ignoreSVGViewBox) {\n        scene.setViewBox({\n          left: viewBox.left,\n          top: viewBox.top,\n          right: viewBox.left + viewBox.width,\n          bottom: viewBox.top + viewBox.height,\n        });\n      }\n    } else if (element.tagName === 'path') {\n      addBorder(element);\n    } else if (element.tagName === 'circle') {\n      addNode(element);\n    } else {\n      let transform = element.attributes.get('transform');\n      if (transform) currentTransform.pushTransform(transform);\n    }\n  }\n\n  function handleElementEnd(element) {\n    let transform = element.attributes.get('transform');\n    if (transform) currentTransform.popTransform(transform);\n    if (element.tagName === 'text' && element.innerText) {\n      appendTextLabel(element);\n    }\n  }\n\n  function appendTextLabel(el) {\n    let fontSize = getNumericAttribute(el, 'font-size');\n    let alpha = Math.floor(\n      (el.attributes.has('fill-opacity') ? getNumericAttribute(el, 'fill-opacity') : 0.2\n    ) * 0xff);\n    let color = 0x00000000;\n    if (el.attributes.has('fill')) color = hexColor(getElementFillColor(el));\n    color = (color & (0xffffff00)) | alpha;\n    labelsText.addText({\n      x: getNumericAttribute(el, 'x'),\n      y: transformY(getNumericAttribute(el, 'y') - fontSize),\n      color,\n      text: el.innerText,\n      fontSize,\n    })\n\n  }\n\n  function addNode(el) {\n    let x = getNumericAttribute(el, 'cx');\n    let y = transformY(getNumericAttribute(el, 'cy'));\n    let r = getNumericAttribute(el, 'r');\n    let nodeName = getTextAttribute(el, 'id');\n    if (nodeName[0] === '_') nodeName = nodeName.substr(1);\n    if (nodeNameToUI.has(nodeName)) {\n      throw new Error('Duplicate node name ' + nodeName);\n    }\n    let componentId = getTextAttribute(el.parent, 'id');\n    let neighbors = nodesByComponent.get(componentId);\n    if (!neighbors) {\n      neighbors = new Set();\n      nodesByComponent.set(componentId, neighbors);\n    }\n    neighbors.add(nodeName);\n\n    let position = currentTransform.transform(x, y);\n    let ui = {\n      componentId,\n      position,\n      color: 0xdcdcdcff,\n      size: r * 2,\n      id: positions.length,\n      name: nodeName,\n    };\n    nodeNameToUI.set(nodeName, ui);\n    positions.push(ui);\n    pointerEvents.addNode(ui);\n    nodes.add(ui);\n\n    text.addText({\n      x: position[0],\n      y: position[1] - r,\n      text: nodeName,\n      limit: 3.14 * r,\n      cx: 0.5,\n    });\n    fuzzySearcher.addWord(nodeName);\n\n    setProgressDebounced(getLoadedSubreddits);\n    scene.renderFrame();\n    if (persistedName && nodeName === persistedName && appState.query === persistedName && !appState.userTypedSomething) {\n      bus.fire('show-subreddit', nodeName);\n    }\n  }\n\n  function getLoadedSubreddits() {\n    return {\n      message: 'Loaded ' + formatNumber(nodeNameToUI.size) + ' subreddits...'\n    };\n  }\n\n  function transformY(y) {\n    return viewBox.height + viewBox.top - y;\n  }\n\n  function addBorder(el) {\n    let { points, color } = parseBorder(el);\n    boundariesFill.addPolygon({ polygon: points, color: color });\n    let clusterId = el.attributes.get('id').substr(1);\n    clusterColors.set(clusterId, color)\n    complimentaryColor.set(clusterId, getComplimentaryColor(color));\n    scene.renderFrame();\n  }\n\n  function getComplimentaryColor(color, lightningFactor = 1.4, alpha = 0xaa) {\n    let r = (color >> 24) & 0xff;\n    let g = (color >> 16) & 0xff;\n    let b = (color >> 8) & 0xff;\n    let [h, s, l] = rgbToHsl(r, g, b);\n    if (l > 0.5) lightningFactor = .8;\n    let [r0, g0, b0] = hslToRgb(h, s, Math.min(1, l * lightningFactor));\n    // let r0 = Math.max(r, b, g) + Math.min(r,b,g) - r;\n    // let b0 = Math.max(r, b, g) + Math.min(r,b,g) - b;\n    // let g0 = Math.max(r, b, g) + Math.min(r,b,g) - g;\n    return (r0 << 24) | (g0 << 16) | (b0 << 8) | alpha;\n  }\nfunction rgbToHsl(r, g, b) {\n  r /= 255, g /= 255, b /= 255;\n\n  var max = Math.max(r, g, b), min = Math.min(r, g, b);\n  var h, s, l = (max + min) / 2;\n\n  if (max == min) {\n    h = s = 0; // achromatic\n  } else {\n    var d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n    switch (max) {\n      case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n      case g: h = (b - r) / d + 2; break;\n      case b: h = (r - g) / d + 4; break;\n    }\n\n    h /= 6;\n  }\n\n  return [ h, s, l ];\n}\n\nfunction hslToRgb(h, s, l) {\n  var r, g, b;\n\n  if (s == 0) {\n    r = g = b = l; // achromatic\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n\n    r = hue2rgb(p, q, h + 1/3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1/3);\n  }\n\n  return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n\n    function hue2rgb(p, q, t) {\n      if (t < 0) t += 1;\n      if (t > 1) t -= 1;\n      if (t < 1/6) return p + (q - p) * 6 * t;\n      if (t < 1/2) return q;\n      if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n      return p;\n    }\n}\n\n  function initScene() {\n    let scene = createScene(canvas, { \n      allowPinchRotation: false,\n      maxZoom: 1500000,\n      minZoom: 50\n    });\n\n    scene.setClearColor(0x0f / 255, 0x0f / 255, 0x0f / 255, 1);\n\n    let cameraPosition = appState.getCameraPosition();\n    if (cameraPosition) {\n      // This is a bit fragile, but it works:\n      let position = scene.getDrawContext().view.position;\n      position[0] = cameraPosition[0];\n      position[1] = cameraPosition[1];\n      position[2] = cameraPosition[2];\n      scene.getCamera().setViewBox();\n      ignoreSVGViewBox = true;\n    } else {\n      let initialSceneSize = 500;\n      scene.setViewBox({\n        left: -initialSceneSize,\n        top: -initialSceneSize,\n        right: initialSceneSize,\n        bottom: initialSceneSize,\n      });\n    }\n    return scene;\n  }\n\n  function parseBorder(el) {\n    let points = getPointsFromPathData(el.attributes.get('d')).map(([x, y]) => {\n      let [x0, y0] = currentTransform.transform(x, transformY(y));\n      return [x0, y0];\n    });\n    let color = hexColor(getElementFillColor(el));\n    return { points, color };\n  }\n}\n\nfunction createTransformParser() {\n  let isDirty = false;\n  let tx = 0,\n    ty = 0;\n  let transformStack = [];\n\n  return {\n    pushTransform,\n    popTransform,\n    transform,\n  };\n\n  function pushTransform(transformStr) {\n    isDirty = true;\n    transformStack.push(parseTransform(transformStr));\n  }\n\n  function popTransform() {\n    if (transformStack.length === 0) throw new Error('Nothing to pop');\n    transformStack.pop();\n    isDirty = true;\n  }\n\n  function parseTransform(str) {\n    let transformNumbers = str.match(/matrix\\((.+)\\)$/i);\n    if (!transformNumbers)\n      throw new Error('Unknown transformation record: ' + str);\n    let coefficients = transformNumbers[1]\n      .split(',')\n      .map((x) => Number.parseFloat(x))\n      .filter(finiteNumber);\n    if (coefficients.length !== 6)\n      throw new Error('Only matrix(a,b,c,d,e,f) is supported at the moment');\n    return coefficients;\n  }\n\n  function transform(x, y) {\n    updateTransform();\n    return [x + tx, y - ty, 0];\n  }\n\n  function updateTransform() {\n    if (!isDirty) return;\n\n    // TODO: this should be real math\n    tx = 0;\n    ty = 0;\n    transformStack.forEach((record) => {\n      tx += record[4];\n      ty += record[5];\n    });\n    isDirty = false;\n  }\n}\n\nfunction finiteNumber(x) {\n  return Number.isFinite(x);\n}\n\nfunction getNumericAttribute(el, name) {\n  let value = Number.parseFloat(el.attributes.get(name));\n  if (!Number.isFinite(value))\n    throw new Error('Element ' + el.tagName + ' does not have a finite numeric attribute ' + name);\n  return value;\n}\n\nfunction getTextAttribute(el, name) {\n  return el.attributes.get(name) || '';\n}\n\nfunction hexColor(rgbArray) {\n  return (rgbArray[0] << 24) | (rgbArray[1] << 16) | (rgbArray[2] << 8) | 0xff;\n}\n\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\" \"+_vm._s(_vm.data.data)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Based on https://github.com/ElemeFE/element/blob/dev/src/utils/clickoutside.js\n// The MIT License (MIT), Copyright (c) 2016 ElemeFE\nconst nodeList = [];\nconst ctx = '@@clickoutsideContext';\n\nlet startClick;\nlet seed = 0;\n\ndocument.addEventListener('mousedown', e => (startClick = e));\ndocument.addEventListener('mouseup', e => {\n  nodeList.forEach(node => node[ctx].documentHandler(e, startClick));\n});\n\n// Also hide when tapped outside.\ndocument.addEventListener('touchstart', e => {\n  startClick = e;\n});\ndocument.addEventListener('touchend', e => {\n  nodeList.forEach(node => node[ctx].documentHandler(e, startClick));\n});\n\nfunction createDocumentHandler(el, binding, vnode) {\n\n  return function(mouseup = {}, mousedown = {}) {\n    if (!vnode || !vnode.context ||\n      !mouseup.target || !mousedown.target ||\n      el.contains(mouseup.target) ||\n      el.contains(mousedown.target) ||\n      el === mouseup.target ||\n      (vnode.context.popperElm &&\n      (vnode.context.popperElm.contains(mouseup.target) ||\n      vnode.context.popperElm.contains(mousedown.target)))) return;\n\n    const methodName = el[ctx].methodName;\n    if (binding.expression && methodName && vnode.context[methodName]) {\n      vnode.context[methodName]();\n    } else {\n      el[ctx].bindingFn && el[ctx].bindingFn();\n    }\n  };\n}\n\nexport default {\n  bind(el, binding, vnode) {\n    nodeList.push(el);\n    const id = seed++;\n    el[ctx] = {\n      id,\n      documentHandler: createDocumentHandler(el, binding, vnode),\n      methodName: binding.expression,\n      bindingFn: binding.value\n    };\n  },\n\n  update(el, binding, vnode) {\n    el[ctx].documentHandler = createDocumentHandler(el, binding, vnode);\n    el[ctx].methodName = binding.expression;\n    el[ctx].bindingFn = binding.value;\n  },\n\n  unbind(el) {\n    let len = nodeList.length;\n\n    for (let i = 0; i < len; i++) {\n      if (nodeList[i][ctx].id === el[ctx].id) {\n        nodeList.splice(i, 1);\n        break;\n      }\n    }\n    delete el[ctx];\n  }\n};","\n<template>\n<div>\n  {{data.data}}\n</div>\n</template>\n<script>\n\nexport default {\n  props: ['data'],\n  data() {\n    return {}\n  },\n  methods: {\n  }\n}\n</script>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tooltip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tooltip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tooltip.vue?vue&type=template&id=552f3579&\"\nimport script from \"./Tooltip.vue?vue&type=script&lang=js&\"\nexport * from \"./Tooltip.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.hideSuggestions),expression:\"hideSuggestions\"}],staticClass:\"ak-typeahead\"},[_c('a',{staticClass:\"menu-opener\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.menuClicked($event)}}},[_c('svg',{staticClass:\"feather feather-info\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}},[_c('circle',{attrs:{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}}),_c('line',{attrs:{\"x1\":\"12\",\"y1\":\"16\",\"x2\":\"12\",\"y2\":\"12\"}}),_c('line',{attrs:{\"x1\":\"12\",\"y1\":\"8\",\"x2\":\"12.01\",\"y2\":\"8\"}})])]),_c('input',{ref:\"input\",attrs:{\"autofocus\":\"\",\"autocomplete\":\"off\",\"autocorrect\":\"off\",\"autocapitalize\":\"off\",\"spellcheck\":\"false\",\"placeholder\":_vm.placeholder},domProps:{\"value\":_vm.currentQuery},on:{\"input\":_vm.handleInput,\"keydown\":_vm.cycleTheList}}),(_vm.currentQuery || _vm.showClearButton)?_c('a',{staticClass:\"search-submit\",attrs:{\"type\":\"submit\",\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.clearSearch($event)}}},[_c('svg',{staticClass:\"feather feather-x-circle\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}},[_c('circle',{attrs:{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}}),_c('line',{attrs:{\"x1\":\"15\",\"y1\":\"9\",\"x2\":\"9\",\"y2\":\"15\"}}),_c('line',{attrs:{\"x1\":\"9\",\"y1\":\"9\",\"x2\":\"15\",\"y2\":\"15\"}})])]):_vm._e(),(_vm.showSuggestions)?_c('ul',{staticClass:\"suggestions\"},_vm._l((_vm.suggestions),function(suggestion,index){return _c('li',{key:index},[_c('a',{staticClass:\"suggestion\",class:{selected: suggestion.selected},attrs:{\"href\":\"#\"},domProps:{\"innerHTML\":_vm._s(suggestion.html)},on:{\"click\":function($event){$event.preventDefault();return _vm.pickSuggestion(suggestion)}}})])}),0):_vm._e(),(_vm.showLoading)?_c('ul',{staticClass:\"suggestions\"},[_c('li',{staticClass:\"searching\"},[(!_vm.loadingError)?_c('span',[_vm._v(\"Searching...\")]):_vm._e(),(_vm.loadingError)?_c('div',{staticClass:\"loading-error\"},[_c('div',[_vm._v(\"Failed to get reddit completions:\")]),_c('pre',[_vm._v(_vm._s(_vm.loadingError))])]):_vm._e()])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class='ak-typeahead' v-click-outside='hideSuggestions'>\n    <a href=\"#\" class='menu-opener' @click.prevent='menuClicked'>\n      <!-- Icon copyright (c) 2013-2017 Cole Bemis: https://github.com/feathericons/feather/blob/master/LICENSE -->\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-info\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\"></line><line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\"></line></svg>\n  </a>\n    <input\n      ref='input' autofocus\n      autocomplete='off'\n      autocorrect='off'\n      autocapitalize='off'\n      spellcheck='false'\n      :value='currentQuery' \n      :placeholder='placeholder'\n      @input='handleInput'\n      @keydown=\"cycleTheList\"\n    >\n    <a\n      type='submit'\n      class='search-submit'\n      href='#'\n      @click.prevent='clearSearch'\n      v-if='currentQuery || showClearButton'\n    >\n<!-- Icon copyright (c) 2013-2017 Cole Bemis: https://github.com/feathericons/feather/blob/master/LICENSE -->\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x-circle\">\n  <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n    <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\n    <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line>\n  </svg>\n</a>\n    <ul v-if=\"showSuggestions\" class=\"suggestions\">\n      <li v-for=\"(suggestion, index) in suggestions\" :key=\"index\">\n        <a\n          @click.prevent=\"pickSuggestion(suggestion)\"\n          class=\"suggestion\"\n          :class=\"{selected: suggestion.selected}\"\n          href=\"#\"\n          v-html=\"suggestion.html\"\n        ></a>\n      </li>\n    </ul>\n\n    <ul v-if=\"showLoading\" class=\"suggestions\">\n      <li class=\"searching\">\n        <span v-if=\"!loadingError\">Searching...</span>\n        <div v-if=\"loadingError\" class=\"loading-error\">\n          <div>Failed to get reddit completions:</div>\n          <pre>{{loadingError}}</pre>\n        </div>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport ClickOutside from '../lib/clickOutside.js'\n\nexport default {\n  directives: { ClickOutside },\n  props: {\n    placeholder: {\n      default: \"Type here\"\n    },\n    showClearButton: {\n      default: false\n    },\n    query: {\n      default: \"\"\n    },\n    delay: {\n      default: 80\n    }\n  },\n  data() {\n    return {\n      currentSelected: -1,\n      showSuggestions: false,\n      showLoading: false,\n      loadingError: null,\n      suggestions: [],\n      currentQuery: this.query\n    };\n  },\n  watch: {\n    query(newQuery) {\n      this.currentQuery = newQuery;\n    }\n  },\n  methods: {\n    refresh() {\n      if (this.showSuggestions) this.getSuggestionsInternal();\n    },\n\n    menuClicked() {\n      this.$emit('menuClicked');\n    },\n\n    hideSuggestions() {\n      this.showSuggestions = false;\n      this.showLoading = false;\n      this.pendingKeyToShow = true;\n    },\n\n    showIfNeeded(visible) {\n      // we need to wait until next key press before we can show suggestion.\n      // This avoids race conditions between search results and form submission\n      if (!this.pendingKeyToShow) this.showSuggestions = visible;\n    },\n\n    focus() {\n      this.$refs.input.focus();\n    },\n\n    pickSuggestion(suggestion) {\n      this.currentQuery = suggestion.text;\n      this.hideSuggestions();\n      this.$emit(\"selected\", this.currentQuery);\n    },\n\n    clearSearch() {\n      let payload = {shouldProceed: true};\n      this.$emit('beforeClear', payload);\n      if (!payload.shouldProceed) return;\n\n      this.currentQuery = '';\n      this.getSuggestionsInternal();\n      // this.focus();\n      this.$emit(\"cleared\");\n    },\n\n    handleInput(event) {\n      this.currentQuery = event.target.value;\n      this.$emit('inputChanged');\n      this.getSuggestionsInternal();\n    },\n\n    getSuggestionsInternal() {\n      var self = this;\n      if (self.previous) {\n        window.clearTimeout(self.previous);\n        self.previous = null;\n      }\n      if (!self.currentQuery) {\n        this.showSuggestions = false;\n        return;\n      }\n\n      self.previous = window.setTimeout(function() {\n        var p = window.fuzzySearcher.find(self.currentQuery);\n\n        if (Array.isArray(p)) {\n          self.suggestions = p.map(x => ({\n            selected: false,\n            text: x.text,\n            html: x.html\n          }));\n          self.currentSelected = -1;\n          self.showIfNeeded(p && p.length > 0);\n        } else if (p) {\n          self.loadingError = null;\n          // self.showLoading = true;\n          p.then(\n            function(suggestions) {\n              self.showLoading = false;\n              suggestions = suggestions || [];\n              self.suggestions = suggestions.map(x => ({\n                selected: false,\n                text: x.text,\n                html: x.html\n              }));\n              self.currentSelected = -1;\n              self.showIfNeeded(suggestions && suggestions.length > 0);\n            },\n            function(err) {\n              self.loadingError = err;\n            }\n          );\n        } else {\n          throw new Error(\"Could not parse suggestions response\");\n        }\n      }, self.delay);\n    },\n\n    cycleTheList(e) {\n      var items = this.suggestions;\n      var currentSelected = this.currentSelected;\n      // Any key is alright for the suggestions\n      this.pendingKeyToShow = false;\n\n      let dx;\n      if (e.which === 38) {\n        // UP\n        dx = -1;\n      } else if (e.which === 40) {\n        // down\n        dx = 1;\n      } else if (e.which === 13) {\n        // Enter === accept\n        if (items[currentSelected]) {\n          this.pickSuggestion(items[currentSelected]);\n        } else {\n          this.pickSuggestion({ text: this.currentQuery });\n        }\n        e.preventDefault();\n        return;\n      } else if (e.which === 27) {\n        // Esc === close\n        this.hideSuggestions();\n      }\n\n      if (!dx || items.length === 0) return;\n\n      e.preventDefault();\n\n      if (currentSelected >= 0) {\n        this.suggestions[currentSelected].selected = false;\n      }\n      currentSelected += dx;\n      if (currentSelected < 0) currentSelected = items.length - 1;\n      if (currentSelected >= items.length) currentSelected = 0;\n\n      this.suggestions[currentSelected].selected = true;\n      this.currentSelected = currentSelected;\n    }\n  }\n};\n</script>\n\n<style lang='stylus'>\n@import '../vars.styl';\n\n.ak-typeahead {\n  height: 100%;\n  flex: 1;\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n\n  input::-ms-clear {\n    display: none;\n  }\n}\n\n  .menu-opener {\n    display: flex;\n    align-items: center;\n    padding: 0 8px;\n    background: background-color;\n    &:hover, &:focus {\n      color: primary-color;\n      background: highlight-color;\n    }\n  }\n\n.search-submit {\n  color: border-hover;\n  position: absolute;\n  right: 0;\n  top: 0;\n  height: 100%;\n  align-items: center;\n  text-decoration: none;\n  display: flex;\n  flex-shrink: 0;\n  width: 48px;\n  justify-content: center;\n  outline: none;\n\n  &:hover, &:focus {\n    color: primary-color;\n    background: highlight-color;\n  }\n}\n\n.suggestion {\n  display: block;\n  width: 100%;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  padding-left: 10px;\n  text-decoration: none;\n  font-weight: bold;\n  color: primary-text;\n\n  b {\n    font-weight: normal;\n  }\n}\n\n.suggestion:hover, .suggestion.selected {\n  background-color: highlight-color;\n  color: primary-color;\n}\n\n.suggestions {\n  position: absolute;\n  top: 48px;\n  width: 100%;\n  padding: 0;\n  background: white;\n  list-style-type: none;\n  margin: 0;\n  border-top: 1px solid $border-color;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n\n  .searching {\n    margin: 8px;\n  }\n\n  .loading-error {\n    pre {\n      color: orangered;\n      overflow-x: auto;\n      padding-bottom: 14px;\n    }\n  }\n}\n\ninput {\n  height: 100%;\n  width: 100%;\n  padding-left: 10px;\n  font-size: 18px;\n  border: 0;\n  border-radius: 0;\n}\n\ninput:focus {\n  outline: none;\n}\n\ninput::placeholder {\n  color: $hint-text;\n}\n\n@media (max-width: small-screen-width) {\n  .suggestion {\n    height: 42px;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Typeahead.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Typeahead.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Typeahead.vue?vue&type=template&id=13269c5b&\"\nimport script from \"./Typeahead.vue?vue&type=script&lang=js&\"\nexport * from \"./Typeahead.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Typeahead.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sidebar\"},[_c('div',{staticClass:\"row\"},[_c('h3',[_vm._v(\"Map of Reddit\")]),_c('a',{staticClass:\"close-btn\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onClose($event)}}},[_c('svg',{staticClass:\"feather feather-x-circle\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}},[_c('circle',{attrs:{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}}),_c('line',{attrs:{\"x1\":\"15\",\"y1\":\"9\",\"x2\":\"9\",\"y2\":\"15\"}}),_c('line',{attrs:{\"x1\":\"9\",\"y1\":\"9\",\"x2\":\"15\",\"y2\":\"15\"}})])])]),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('p',[_vm._v(\" Each dot is a subreddit. Two dots within the same cluster are usually close to each other if multiple users frequently leave comments on both subreddits. \")]),_c('p',[_vm._v(\" If you find something missing, please feel free to \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://github.com/anvaka/map-of-reddit-data#how-to-add-a-new-subreddit\",\"target\":\"_blank\"}},[_vm._v(\"edit the map\")]),_vm._v(\". \")]),_c('p',[_vm._v(\" I spent last couple years developing this website as a hobby project. If you enjoy this work please support it \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://www.patreon.com/anvaka\"}},[_vm._v(\"on Patreon\")]),_vm._v(\" or \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://github.com/sponsors/anvaka\"}},[_vm._v(\"GitHub\")]),_vm._v(\" and I promise to not disappoint you with new features :). \")]),_c('p',[_vm._v(\" Please follow me on Twitter to stay in touch: \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://twitter.com/anvaka\"}},[_vm._v(\"https://twitter.com/anvaka\")]),_vm._v(\". \")]),_c('p',[_vm._v(\" Thank you for your interest and support! \")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"sidebar\">\n    <div class='row'>\n      <h3>Map of Reddit</h3>\n      <!-- Icon copyright (c) 2013-2017 Cole Bemis: https://github.com/feathericons/feather/blob/master/LICENSE -->\n        <a href='#' @click.prevent='onClose' class='close-btn'>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x-circle\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line><line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line></svg>\n        </a>\n    </div>\n\n    <div class=\"container\">\n      <p>\n        Each dot is a subreddit. Two dots within the same cluster are \n        usually close to each other if multiple users frequently leave comments on both subreddits.\n      </p>\n      <p>\n        If you find something missing, please feel free to <a href='https://github.com/anvaka/map-of-reddit-data#how-to-add-a-new-subreddit' target='_blank' class='accent'>edit the map</a>.\n      </p>\n      <p>\n        I spent last couple years developing this website as a hobby project. If you enjoy\n        this work please support it <a href=\"https://www.patreon.com/anvaka\" class='accent'>on Patreon</a> or\n        <a href=\"https://github.com/sponsors/anvaka\" class='accent'>GitHub</a> and I promise to not disappoint you\n        with new features :).\n      </p>\n      <p>\n      Please follow me on Twitter  to stay in touch: <a href='https://twitter.com/anvaka' class='accent'>https://twitter.com/anvaka</a>.\n      </p>\n      <p>\n        Thank you for your interest and support!\n      </p>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  mounted() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  },\n  beforeDestroy() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  },\n  methods: {\n    onClose() {\n      this.$emit('close');\n    },\n    handleKeyDown(e) {\n      if (e.which === 27 /* ESC */) {\n        this.onClose();\n      }\n    }\n  }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Sidebar.vue?vue&type=template&id=6b61a779&\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=js&\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',[_vm._v(\"Improve this map\")]),_c('a',{staticClass:\"close-btn\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onClose($event)}}},[_c('svg',{staticClass:\"feather feather-x-circle\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}},[_c('circle',{attrs:{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}}),_c('line',{attrs:{\"x1\":\"15\",\"y1\":\"9\",\"x2\":\"9\",\"y2\":\"15\"}}),_c('line',{attrs:{\"x1\":\"9\",\"y1\":\"9\",\"x2\":\"15\",\"y2\":\"15\"}})])]),_c('p',[_vm._v(\"The entire website is open source. You can contribute in multiple ways:\")]),_vm._m(0),_vm._v(\" Thank you for your support! \"),_c('br'),_vm._v(\" ♥️ Anvaka \")])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_c('li',[_vm._v(\" Discuss this product on our own subreddit: \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://www.reddit.com/r/MofR/\"}},[_vm._v(\"/r/MofR\")])]),_c('li',[_vm._v(\"Support this work \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://www.patreon.com/anvaka\"}},[_vm._v(\"on Patreon\")]),_vm._v(\" or \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://github.com/sponsors/anvaka\"}},[_vm._v(\"GitHub\")]),_vm._v(\". There is a lot of things I'd love to improve about this project, but without your support I wouldn't know if I'm moving in the right direction. \")]),_c('li',[_vm._v(\" Add new subreddits or update positions of existing ones if you found an issue. Please follow instructions \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://github.com/anvaka/map-of-reddit-data#how-to-add-a-new-subreddit\",\"target\":\"_blank\"}},[_vm._v(\"here\")]),_vm._v(\". \")]),_c('li',[_vm._v(\"If you found a rendering bug - consider reporting it or fixing it \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://github.com/anvaka/map-of-reddit\",\"target\":\"_blank\"}},[_vm._v(\"here\")]),_vm._v(\". \")]),_c('li',[_vm._v(\" Share your suggestions and follow me on Twitter. My direct messages are open: \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://twitter.com/anvaka\"}},[_vm._v(\"https://twitter.com/anvaka\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <h3>Improve this map</h3>\n    <!-- Icon copyright (c) 2013-2017 Cole Bemis: https://github.com/feathericons/feather/blob/master/LICENSE -->\n    <a href='#' @click.prevent='onClose' class='close-btn'>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x-circle\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line><line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line></svg>\n    </a>\n    <p>The entire website is open source. You can contribute in multiple ways:</p>\n    <ul>\n      <li>\n        Discuss this product on our own subreddit: <a href='https://www.reddit.com/r/MofR/' class='accent'>/r/MofR</a>\n      </li>\n      <li>Support this work <a href=\"https://www.patreon.com/anvaka\" class='accent'>on Patreon</a> or\n      <a href=\"https://github.com/sponsors/anvaka\" class='accent'>GitHub</a>. There is a lot of things\n      I'd love to improve about this project, but without your support I wouldn't know if I'm moving\n      in the right direction.\n      </li>\n      <li>\n        Add new subreddits or update positions of existing ones if you found an issue. Please \n        follow instructions  <a href='https://github.com/anvaka/map-of-reddit-data#how-to-add-a-new-subreddit'\n        class='accent' target='_blank'>here</a>.\n      </li>\n      <li>If you found a rendering bug - consider reporting it or fixing it \n        <a href='https://github.com/anvaka/map-of-reddit' class='accent' target='_blank'>here</a>.\n      </li>\n      <li>\n        Share your suggestions and follow me on Twitter. My direct messages are open: \n<a href='https://twitter.com/anvaka' class='accent'>https://twitter.com/anvaka</a>\n      </li>\n    </ul>\n    Thank you for your support! <br/>\n    ♥️ Anvaka\n  </div>\n</template>\n\n<script>\nexport default {\n  mounted() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  },\n  beforeDestroy() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  },\n  methods: {\n    onClose() {\n      this.$emit('close');\n    },\n    handleKeyDown(e) {\n      if (e.which === 27 /* ESC */) {\n        this.onClose();\n      }\n    }\n  }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImproveWindow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImproveWindow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ImproveWindow.vue?vue&type=template&id=6f529b0a&\"\nimport script from \"./ImproveWindow.vue?vue&type=script&lang=js&\"\nexport * from \"./ImproveWindow.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"small-preview-container\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.showFullPreview($event)}}},[_c('div',{staticClass:\"header\"},[_c('span',[_vm._v(\"r/\"+_vm._s(_vm.name))]),(_vm.details)?_c('span',{staticClass:\"subscribers-count\"},[_vm._v(_vm._s(_vm.details.subscribers)+\" members · \"+_vm._s(_vm.details.active)+\" active\")]):_vm._e()]),(_vm.loading)?_c('loading-icon'):_vm._e(),(_vm.details && _vm.details.image)?_c('img',{staticClass:\"community-icon\",attrs:{\"src\":_vm.details.image.icon}}):_vm._e(),(_vm.details)?_c('div',{staticClass:\"info\"},[_vm._v(_vm._s(_vm.details.description))]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{staticClass:\"loader\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 32 32\",\"width\":\"28\",\"height\":\"28\",\"fill\":\"white\"}},[_c('path',{attrs:{\"opacity\":\".25\",\"d\":\"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\"}}),_c('path',{attrs:{\"d\":\"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\"}},[_c('animateTransform',{attrs:{\"attributeName\":\"transform\",\"type\":\"rotate\",\"from\":\"0 16 16\",\"to\":\"360 16 16\",\"dur\":\"0.8s\",\"repeatCount\":\"indefinite\"}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./LoadingIcon.vue?vue&type=template&id=83262da8&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <a href='#' @click.prevent='showFullPreview' class='small-preview-container'>\n    <div class='header'>\n      <span>r/{{name}}</span>\n      <span v-if='details' class='subscribers-count'>{{details.subscribers}} members · {{details.active}} active</span>\n    </div>\n    <loading-icon v-if='loading'></loading-icon>\n    <img v-if='details && details.image' :src='details.image.icon' class='community-icon'>\n    <div class='info' v-if='details'>{{details.description}}</div>\n    <!-- <div class='thumbnails' v-if='details && details.image'>\n      <img v-if='details.image.banner' :src='details.image.banner' class='banner'>\n      <img :src='details.image.icon' class='community-icon'>\n    </div> -->\n  </a>\n</template>\n<script>\nimport bus from './lib/bus';\nimport LoadingIcon from './LoadingIcon'\nimport {formatNumber} from './lib/utils';\n\nexport default {\n  name: 'SmallPreview',\n  props: ['name'],\n  components: {\n    LoadingIcon\n  },\n  data() {\n    return {\n      loading: true,\n      details: null\n    }\n  },\n  watch: {\n    name() {\n      this.getSubredditInfo();\n    }\n  },\n  mounted() {\n    this.getSubredditInfo();\n  },\n  methods: {\n    showFullPreview() {\n      bus.fire('show-subreddit', this.name, true);\n    },\n    getSubredditInfo() {\n      let fetchedName = this.name;\n      this.details = null;\n      this.loading = true;\n      fetch('https://www.reddit.com/r/' + fetchedName + '/about.json', {mode: 'cors'})\n        .then(x => x.json())\n        .then(x => {\n          if (this.name !== fetchedName) return;\n          let data = x.data;\n          let description = data.public_description;\n          let displayName = data.display_name_prefixed;\n          let subscribers = formatNumber(data.subscribers);\n          let active = formatNumber(data.accounts_active);\n          this.loading = false;\n          let image = null;\n          let icon = data.icon_img || data.community_icon;\n          if (icon) {\n            let banner = data.banner_img || data.banner_background_image;\n            image = {\n              icon: icon.split('?')[0],\n              banner: banner ? banner.split('?')[0] : null\n            }\n          }\n          if (data.over18 && !window.ageConfirmed) {\n            image = null;\n          }\n          this.details = {\n            description, displayName, subscribers, active, image\n          }\n        })\n    }\n  }\n};\n</script>\n<style lang=\"stylus\">\ntext-color = #eee;\n.loader {\n  margin: 8px;\n}\n.header {\n  font-size: 16px;\n}\n.small-preview-container {\n  padding: 4px 8px;\n  font-size: 12px;\n  color: text-color;\n  a {\n    color: text-color;\n  }\n}\n.info {\n  margin-top: 4px;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.subscribers-count {\n  color: #999999;\n  float: right;\n  display: inline-block;\n  font-size: 12px;\n}\n.community-icon {\n  width: 32px;\n  border-radius: 100%;\n  margin: 8px;\n  float: left;\n}\n.banner {\n  // height: 48px;\n  width: 100%;\n  position: absolute;\n  top: 0px;\n}\n.thumbnails {\n  overflow: hidden;\n  position: absolute;\n  bottom: 84px;\n  width: 100%;\n  height: 48px;\n  background: orange;\n  left: 0;\n}\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SmallPreview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SmallPreview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SmallPreview.vue?vue&type=template&id=7b1a6d47&\"\nimport script from \"./SmallPreview.vue?vue&type=script&lang=js&\"\nexport * from \"./SmallPreview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SmallPreview.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default function createFirstInteractionListener(callback) {\n  window.addEventListener('mousedown', handleFirstEvent, true);\n  window.addEventListener('wheel', handleFirstEvent, true);\n  window.addEventListener('touchstart', handleFirstEvent, true);\n  window.addEventListener('keydown', handleFirstEvent, true);\n\n  let called = false;\n\n  return dispose;\n\n  function handleFirstEvent() {\n    if (called) return;\n    called = true;\n    callback();\n  }\n\n  function dispose() {\n    window.removeEventListener('mousedown', handleFirstEvent, true);\n    window.removeEventListener('wheel', handleFirstEvent, true);\n    window.removeEventListener('touchstart', handleFirstEvent, true);\n    window.removeEventListener('keydown', handleFirstEvent, true);\n  }\n}","<template>\n  <div id=\"app\">\n    <div v-if='!isWebGLEnabled'>\n      <div class='absolute no-webgl'>\n        <h4>WebGL is not enabled :(</h4>\n        <p>This website needs <a href='https://en.wikipedia.org/wiki/WebGL' class='accent'>WebGL</a> to render a map of reddit.\n        </p> <p>\n        You can try another browser. If the problem persists - very likely your video card isn't supported.\n        </p>\n      </div>\n    </div>\n    <div v-if='isWebGLEnabled'>\n    <transition name='fade'>\n      <div class='progress' v-if='progressMessage'>{{progressMessage}}</div>\n    </transition>\n    <transition name='fade'>\n      <div class='progress subgraph' v-if='subgraphName'>\n        Only <a href='#' class='accent' @click.prevent='onSubgraphRootClick'>/r/{{subgraphName}}</a> related subreddits are shown.\n        <a href='#' class='accent' @click.prevent='onExitSubgraph'>view all</a>\n      </div>\n    </transition>\n    <subreddit v-if=\"subreddit\" :name=\"subreddit\" class=\"preview\" @declineAge='onDeclineAge'>\n      <template slot='after-title'>\n        <div>\n          <a href='#' class='subreddit-action' @click.prevent='showRelated' v-if='graphLoaded'>Show related</a>\n          <span v-if='!graphLoaded' class='subreddit-action'>the map is still loading...</span>\n        </div>\n      </template>\n    </subreddit>\n    <form @submit.prevent=\"onSubmit\" class=\"search-box\">\n      <typeahead\n        placeholder=\"Find subreddit\"\n        @menuClicked='sidebarVisible = true'\n        @selected='findSubreddit'\n        @beforeClear='closeSubredditOnSmallScreen'\n        @cleared='closeSubredditViewer'\n        @inputChanged='onTypeAheadInput'\n        :showClearButton=\"subreddit\"\n        :query=\"appState.query\"\n      ></typeahead>\n    </form>\n    <a href='#' @click.prevent='onImproveClick' class='accent improve'>Improve this map</a>\n    <transition name='slide-bottom'>\n      <small-preview v-if=\"smallPreview\" :name=\"smallPreview\" class=\"small-preview\"></small-preview>\n    </transition>\n\n    <transition name='slide-top'>\n      <improve-window v-if='improveVisible' @close='improveVisible = false' class='improve-window'></improve-window>\n    </transition>\n\n    <tooltip\n      v-if=\"tooltip\"\n      :style=\"{\n      left: tooltip.x + 'px',\n      top: tooltip.y + 'px'\n    }\"\n      :data=\"tooltip\"\n      class=\"tooltip\"\n    ></tooltip>\n\n    <transition name='fade'>\n      <div class='backdrop' v-if='sidebarVisible || improveVisible' @click=\"onBackdropClick\"></div>\n    </transition>\n    <transition name='slide-left'>\n      <sidebar v-if=\"sidebarVisible\" @close='sidebarVisible = false'></sidebar>\n    </transition>\n    </div>\n  </div>\n</template>\n\n<script>\nimport \"vuereddit/dist/vuereddit.css\";\n\nimport createStreamingSVGRenderer from './lib/createStreamingSVGRenderer';\nimport Tooltip from \"./Tooltip\";\nimport Typeahead from \"./components/Typeahead\";\nimport Sidebar from \"./components/Sidebar\";\nimport ImproveWindow from \"./components/ImproveWindow\";\nimport Subreddit from \"vuereddit\";\nimport SmallPreview from \"./SmallPreview\";\nimport appState from \"./appState.js\";\nimport createFirstInteractionListener from './lib/createFirstInteractionListener';\nimport {isWebGLEnabled} from 'w-gl';\n\nimport bus from \"./lib/bus\";\n\nexport default {\n  components: {\n    Tooltip,\n    Typeahead,\n    Subreddit,\n    Sidebar,\n    ImproveWindow,\n    SmallPreview\n  },\n  name: \"app\",\n  methods: {\n    showRelated() {\n      this.scene.showRelated(this.subreddit);\n      if (isSmallScreen()) {\n        // move panel to the bottom\n        this.smallPreview = this.subreddit;\n        this.subreddit = null;\n      }\n    },\n    findSubreddit(q) {\n      appState.query = q;\n      this.onSubmit();\n    },\n    closeSubredditOnSmallScreen(payload) {\n      appState.userTypedSomething = true;\n      if (isSmallScreen() && this.subreddit) {\n        // First time - just close the subreddit, second time - clear all\n        payload.shouldProceed = false;\n        this.subreddit = null;\n        this.scene.focus();\n      } \n    },\n    onTypeAheadInput() {\n      this.typeaheadChanged = true;\n      appState.userTypedSomething = true;\n    },\n    onDeclineAge(e) {\n      e.preventDefault();\n      this.closeSubredditViewer();\n    },\n    onBackdropClick() {\n      this.sidebarVisible = false;\n      this.improveVisible = false;\n    },\n    onImproveClick() {\n      this.improveVisible = true;\n    },\n    closeSubredditViewer() {\n      this.subreddit = null;\n      this.smallPreview = null;\n      appState.query = '';\n      appState.saveQuery(appState.query);\n      bus.fire('unfocus');\n    },\n    showTooltip(e) {\n      if (e) {\n        this.tooltip = e;\n      } else {\n        this.tooltip = null;\n      }\n    },\n    onSubmit() {\n      bus.fire('focus-node', appState.query);\n      appState.saveQuery(appState.query);\n      this.subgraphName = null;\n    },\n    onSubgraphRootClick() {\n      bus.fire('subgraph-focus-node', this.subgraphName);\n    },\n    onExitSubgraph() {\n      bus.fire('exit-subgraph');\n      this.subgraphName = null;\n    },\n    showSubreddit(subreddit, forceFullView) {\n      if (isSmallScreen() && !forceFullView) {\n        this.smallPreview = subreddit;\n      } else {\n        this.smallPreview = null;\n        this.subreddit = subreddit;\n      }\n      appState.query = subreddit;\n      this.tooltip = null;\n      appState.saveQuery(appState.query);\n    },\n\n    setProgress(progress) {\n      if (progress && progress.mapLoaded) {\n        // last message!\n        if (!this.typeaheadChanged) {\n          this.progressMessage = progress.error ? 'Something is likely not right...' : 'Map is ready to use. Please enjoy';\n        }\n        this.graphLoaded = true;\n        this.disposeFirstListener = createFirstInteractionListener(() => {\n          setTimeout(() => this.progressMessage = null, 3000);\n        });\n      } else if (progress && progress.subgraphDone) {\n        this.progressMessage = null;\n        this.subgraphName = progress.subgraphName;\n      } else if (progress) {\n        this.progressMessage = progress.message;\n        this.subgraphVisualized = null;\n      } \n    }\n  },\n  data() {\n    return {\n      improveVisible: false,\n      isWebGLEnabled: false,\n      typeaheadChanged: false,\n      tooltip: null,\n      subgraphName: null,\n      subreddit: null,\n      smallPreview: null,\n      sidebarVisible: false,\n      progressMessage: '',\n      graphLoaded: false,\n      appState,\n    };\n  },\n  mounted() {\n    const canvas = document.getElementById(\"cnv\");\n    this.isWebGLEnabled = isWebGLEnabled(canvas);\n    if (!this.isWebGLEnabled) return;\n\n    let svgRenderer = createStreamingSVGRenderer(canvas);\n    let path = appState.getFilePath();\n    svgRenderer.loadSVG(path);\n    this.scene = svgRenderer;\n\n    bus.on('show-tooltip', this.showTooltip);\n    bus.on('show-subreddit', this.showSubreddit);\n    bus.on('progress', this.setProgress);\n  },\n\n  beforeDestroy() {\n    if (this.scene) {\n      this.scene.dispose();\n    }\n    if (this.disposeFirstListener) {\n      this.disposeFirstListener();\n    }\n    bus.off('show-tooltip', this.showTooltip);\n    bus.off('show-subreddit', this.showSubreddit);\n    bus.off('progress', this.setProgress);\n  }\n};\n\nfunction isSmallScreen() {\n  return window.innerWidth < 550;\n}\n</script>\n\n<style lang='stylus'>\n@import './vars.styl';\n\n#app {\n  position: relative;\n  background: background-color;\n}\n.no-webgl {\n  width: 100%;\n  color: hsla(215, 37%, 55%, 1);\n  flex-direction: column; text-align: center;\n  padding: 12px;\n}\n.no-webgl h4 {\n  margin: 7px 0;\n  font-size: 24px;\n}\n.subreddit .subreddit-action {\n  display: inline-block;\n  border: 1px solid;\n  color: primary-color;\n  border-radius: 3px;\n  padding: 0 8px;\n  margin: 8px;\n}\n\n.subreddit span.subreddit-action {\n  border-color: border-color;\n}\n\n.backdrop {\n  position fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.21);\n}\n\n.close-container {\n  position: fixed;\n  z-index: 2;\n  top: 0;\n  right: 0;\n  height: 40px;\n\n  a {\n    padding: 0 12px;\n    font-size: 12px;\n    color: #fff;\n    background-color: #333;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n  }\n}\n.improve {\n  position: fixed;\n  background: rgba(0, 0, 0, 0.3);\n  padding: 0 8px;\n  font-size: 12px;\n  right: 8px;\n  bottom: 8px;\n}\n\n.fade-enter-active, .fade-leave-active {\n  transition: opacity .5s;\n}\n.fade-enter, .fade-leave-to {\n  opacity: 0;\n}\n\n.slide-bottom-enter-active, .slide-bottom-leave-active {\n  transition: transform .3s cubic-bezier(0,0,0.58,1);\n}\n.slide-bottom-enter, .slide-bottom-leave-to {\n  transform: translateY(84px);\n}\n\n.small-preview {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 84px;\n  background: rgba(5, 15, 43, 1); \n  box-shadow: 0 -4px 4px rgba(0,0,0,0.42);\n}\n\n.subreddit.preview {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: side-panel-width + 16px;\n  height: 100vh;\n  overflow: auto;\n}\n\n.row {\n  display: flex;\n  flex-direction: row;\n  align-items: baseline;\n}\n\n.row .label {\n  flex: 1;\n}\n\n.row .value {\n  flex: 1;\n}\n\n.row select {\n  width: 100%;\n}\n\n.btn-command {\n  display: block;\n  padding: 4px;\n  margin-top: 10px;\n  border: 1px solid;\n}\n\n.tooltip {\n  position: fixed;\n  background: post-background;\n  border: 1px solid border-hover;\n  color: primary-color;\n  padding: 8px;\n  pointer-events: none;\n  max-width: 400px;\n  transform: translateY(calc(-100% - 8px));\n  font-family: monospace;\n}\n\n.subreddit {\n  background: panel-background;\n  box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);\n  color: highlight-color;\n  .error {\n    color: white;\n    h3 {\n      color: error-color;\n    }\n  }\n  .background-area {\n    background: post-background;\n    border-bottom: 1px solid border-color;\n\n    .community-icon {\n      background: post-background;\n    }\n  }\n  h2, h3 {\n    color: primary-color;\n  }\n  .loading {\n    margin-top: 8px;\n  }\n  .age-warning  {\n    h2 {\n      text-align: center;\n      display: inline-block;\n    }\n  }\n  .error,\n  .age-warning {\n    margin-top: 62px;\n  }\n  a {\n    color: highlight-color;\n  }\n  .post {\n    background: post-background;\n    border: 1px solid border-color;\n    .url {\n      color: inherit;\n    }\n    .title, h1 {\n      color: primary-color;\n    }\n    a.comments-count {\n      &:hover {\n        background: hover-background;\n      }\n    }\n    .post-content, .byline {\n      a:hover {\n        background: hover-background;\n      }\n    }\n    .status-line {\n      background-color: #161617;\n      .vote-count {\n        color: primary-color;\n        background: initial;\n      }\n    }\n    .read-more {\n      background-image: linear-gradient(180deg,hsla(0,0%,100%,0), #171718);\n    }\n    &:hover {\n      border: 1px solid border-hover;\n    }\n  }\n}\n\na {\n  color: highlight-color;\n  text-decoration: none;\n}\n.search-box {\n  position: absolute;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), 0 -1px 0px rgba(0, 0, 0, 0.02);\n  height: 48px;\n  font-size: 16px;\n  margin-top: 16px;\n  padding: 0;\n  cursor: text;\n  left: 8px;\n  width: side-panel-width;\n}\n\n.progress {\n  position: fixed;\n  top: 0px;\n  left: 50%;\n  transform: translateX(-50%);\n  color: white;\n  padding: 8px;\n  background: rgba(5, 15, 43, 0.4);\n  box-shadow: 0 4px 4px rgba(0,0,0,0.2);\n  user-select: none;\n}\n\n.slide-left-enter-active, .slide-left-leave-active {\n  transition: transform 150ms cubic-bezier(0,0,0.58,1);\n}\n.slide-left-enter, .slide-left-leave-to {\n  transform: translateX(-100%);\n}\n\n.slide-top-enter-active, .slide-top-leave-active {\n  transition: opacity .3s cubic-bezier(0,0,0.58,1);\n}\n.slide-top-enter, .slide-top-leave-to {\n  opacity: 0;\n}\n.improve-window {\n  position: fixed;\n  transform: translate(-50%, -50%);\n  top: 0;\n  left: 50%;\n  top: 50%;\n  width: 400px;\n  background: white;\n  z-index: 2;\n  box-shadow: 0 -1px 24px rgb(0 0 0);\n  padding: 8px 16px;\n  overflow-y: auto;\n  max-height: 100%;\n  h3 {\n    margin: 0;\n  }\n  .close-btn {\n    position: absolute;\n    right: 8px;\n    top: 8px;\n  }\n}\na.accent {\n  color: highlight-link;\n}\n.sidebar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  width: side-panel-width - 10px;\n  background: white;\n  z-index: 2;\n  box-shadow: 0 -1px 24px rgb(0 0 0);\n  display: flex;\n  flex-direction: column;\n\n  h3 {\n    font-weight: normal;\n    margin: 8px 8px 0 8px;\n    font-size: 18px;\n    flex: 1;\n  }\n  .close-btn {\n    align-self: stretch;\n    align-items: center;\n    display: flex;\n    padding: 0 8px;\n  }\n\n  .container {\n    padding: 8px;\n    flex: 1;\n    overflow-y: auto;\n  }\n  h4 {\n    margin: 0;\n    font-weight: normal;\n    text-align: right;\n  }\n  .byline {\n    margin: 0 8px 8px;\n    font-size: 12px;\n  }\n}\n.progress.subgraph {\n  max-width: 400px;\n  text-align: center;\n}\n\n@media (max-width: 1200px) {\n  .progress {\n    top: 16px;\n    right: 8px;\n    left: inherit;\n    transform: inherit;\n  }\n}\n@media (max-width: 810px) {\n  .progress.subgraph {\n    top: 62px;\n    left: 8px;\n  }\n}\n\n@media (max-width: small-screen-width) {\n  #app {\n    width: 100%;\n    margin: 0;\n  }\n  .sidebar {\n    width: 100%;\n  }\n  .search-box {\n    left: 0;\n    margin-top: 0;\n    width: 100%;\n  }\n  .improve-window {\n    width: 100%;\n    height: 100%;\n  }\n  .subreddit.preview {\n    width: 100%;\n  }\n  .progress, .progress.subgraph  {\n    top: 48px;\n    left: 0;\n    color: white;\n    text-align: center;\n    width: 100%;\n    position: absolute;\n    transform: initial;\n    box-shadow: initial;\n  }\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=6cb8677c&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=stylus&\""],"sourceRoot":""}